<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第十章 排队论 - 交互式教程</title>
    
    <!-- MathJax完整配置 -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                displayMath: [['$$','$$'], ['\\[','\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            "HTML-CSS": {
                availableFonts: ["TeX"],
                linebreaks: { automatic: true }
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            color: #343434;
        }
        
        /* 导航栏 */
        nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #343434 0%, #2a2a2a 100%);
            color: #ffffff;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 3px 0 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        nav h2 {
            color: #f27d00;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #f27d00;
            padding-bottom: 10px;
        }
        
        nav ul {
            list-style: none;
        }
        
        nav ul li {
            margin: 10px 0;
        }
        
        nav ul li a {
            color: #a6d6c9;
            text-decoration: none;
            display: block;
            padding: 8px 12px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        nav ul li a:hover {
            background: #f27d00;
            color: #ffffff;
            transform: translateX(5px);
        }
        
        nav ul ul {
            margin-left: 15px;
        }
        
        nav ul ul li a {
            font-size: 0.9em;
            color: #f7d117;
        }
        
        /* 主内容区 */
        main {
            margin-left: 300px;
            padding: 40px;
            max-width: 1200px;
        }
        
        header {
            background: linear-gradient(135deg, #f27d00 0%, #ff9933 100%);
            color: #ffffff;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(242, 125, 0, 0.3);
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        /* 章节样式 */
        section {
            background: #ffffff;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }
        
        section h2 {
            color: #f27d00;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #a6d6c9;
        }
        
        section h3 {
            color: #343434;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #f7d117;
        }
        
        section h4 {
            color: #f27d00;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }
        
        /* 折叠/展开样式 */
        .collapsible {
            background: linear-gradient(135deg, #a6d6c9 0%, #b8e0d5 100%);
            color: #343434;
            cursor: pointer;
            padding: 15px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 8px;
            margin: 15px 0 5px 0;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .collapsible:hover {
            background: linear-gradient(135deg, #8fc5b8 0%, #a6d6c9 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        
        .collapsible:after {
            content: '▼';
            float: right;
            transition: transform 0.3s;
        }
        
        .collapsible.active:after {
            transform: rotate(-180deg);
        }
        
        .content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #f9f9f9;
            border-left: 4px solid #a6d6c9;
            border-radius: 0 0 8px 8px;
        }
        
        .content-inner {
            padding: 20px;
        }
        
        /* 表格样式 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        table th {
            background: linear-gradient(135deg, #f27d00 0%, #ff9933 100%);
            color: #ffffff;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        table td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        table tr:hover {
            background: #fff5e6;
        }
        
        /* 定义框 */
        .definition {
            background: linear-gradient(135deg, #fff9e6 0%, #fffbf0 100%);
            border-left: 5px solid #f7d117;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(247, 209, 23, 0.2);
        }
        
        .definition h4 {
            color: #f27d00;
            margin-bottom: 10px;
        }
        
        /* 定理框 */
        .theorem {
            background: linear-gradient(135deg, #e6f7f5 0%, #f0faf9 100%);
            border-left: 5px solid #a6d6c9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(166, 214, 201, 0.2);
        }
        
        .theorem h4 {
            color: #f27d00;
            margin-bottom: 10px;
        }
        
        /* 例题框 */
        .example {
            background: linear-gradient(135deg, #fff0e6 0%, #fff5ed 100%);
            border: 2px solid #f27d00;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(242, 125, 0, 0.2);
        }
        
        .example h4 {
            color: #f27d00;
            margin-bottom: 15px;
        }
        
        .solution {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #f27d00;
        }
        
        .solution strong {
            color: #f27d00;
        }
        
        /* 公式显示 */
        .mjx-chtml {
            font-size: 1.1em !important;
        }
        
        .formula-block {
            background: #f9f9f9;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #f7d117;
            overflow-x: auto;
        }
        
        /* 按钮样式 */
        .btn {
            background: linear-gradient(135deg, #f27d00 0%, #ff9933 100%);
            color: #ffffff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px 5px;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(242, 125, 0, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(242, 125, 0, 0.4);
        }
        
        /* 提示框 */
        .note {
            background: #fff9e6;
            border-left: 5px solid #f7d117;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .note strong {
            color: #f27d00;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            nav {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            main {
                margin-left: 0;
                padding: 20px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
        }
        
        /* 返回顶部按钮 */
        #backToTop {
            display: none;
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #f27d00;
            color: #ffffff;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
            z-index: 999;
        }
        
        #backToTop:hover {
            background: #ff9933;
            transform: translateY(-5px);
        }
        
        /* 加载提示 */
        .loading {
            text-align: center;
            padding: 20px;
            color: #f27d00;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav>
        <h2>📚 排队论教程</h2>
        <ul>
            <li><a href="#intro">第一节 引言</a>
                <ul>
                    <li><a href="#intro-1">排队系统特征</a></li>
                    <li><a href="#intro-2">系统描述</a></li>
                    <li><a href="#intro-3">符号表示</a></li>
                    <li><a href="#intro-4">数量指标</a></li>
                    <li><a href="#intro-5">基本问题</a></li>
                </ul>
            </li>
            <li><a href="#section2">第二节 生灭过程</a>
                <ul>
                    <li><a href="#section2-1">生灭过程简介</a></li>
                    <li><a href="#section2-2">Poisson过程</a></li>
                </ul>
            </li>
            <li><a href="#section3">第三节 M/M/s等待制</a>
                <ul>
                    <li><a href="#section3-1">单服务台模型</a></li>
                    <li><a href="#section3-2">多服务台模型</a></li>
                </ul>
            </li>
            <li><a href="#section4">第四节 M/M/s混合制</a>
                <ul>
                    <li><a href="#section4-1">单服务台混合制</a></li>
                    <li><a href="#section4-2">多服务台混合制</a></li>
                </ul>
            </li>
            <li><a href="#section5">第五节 其他模型</a></li>
            <li><a href="#section6">第六节 系统优化</a></li>
            <li><a href="#exercises">习题</a></li>
        </ul>
    </nav>

    <!-- 主内容区 -->
    <main>
        <header>
            <h1>第十章 排队论</h1>
            <p>Queueing Theory - 运筹学教程（第5版）</p>
        </header>

        <!-- 第一节：引言 -->
        <section id="intro">
            <h2>第一节 引言</h2>
            
            <h3 id="intro-1">一、排队系统的特征及排队论</h3>
            <p>排队论（Queueing theory）是研究<strong>排队系统</strong>（又称为随机服务系统）的数学理论和方法，是运筹学的一个重要分支。在日常生活中，人们会遇到各种各样的排队问题，如进餐馆就餐、到图书馆借书、在车站等车、去医院看病、去售票处购票、仓库领物品等。</p>
            
            <div class="note">
                <strong>💡 注意：</strong>排队问题的表现形式往往是拥挤现象，随着生产与服务的日益社会化，由排队引起的拥挤现象会愈来愈普遍。
            </div>

            <button class="collapsible">📋 表10-1：常见排队系统示例</button>
            <div class="content">
                <div class="content-inner">
                    <table>
                        <thead>
                            <tr>
                                <th>到达的顾客</th>
                                <th>要求的服务</th>
                                <th>服务机构</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1. 不能运转的机器</td><td>修理</td><td>修理工人</td></tr>
                            <tr><td>2. 修理工人</td><td>领取修配零件</td><td>管理员</td></tr>
                            <tr><td>3. 病人</td><td>就诊</td><td>医生</td></tr>
                            <tr><td>4. 打电话</td><td>通话</td><td>交换台</td></tr>
                            <tr><td>5. 文稿</td><td>打字</td><td>打字员</td></tr>
                            <tr><td>6. 录入计算机中的文件</td><td>打印</td><td>打印机</td></tr>
                            <tr><td>7. 提货单</td><td>提取货物</td><td>仓库管理员</td></tr>
                            <tr><td>8. 待降落的飞机</td><td>降落</td><td>跑道指挥机构</td></tr>
                            <tr><td>9. 到达港口的货船</td><td>装货或卸货</td><td>码头（泊位）</td></tr>
                            <tr><td>10. 河水进入水库</td><td>放水、调整水位</td><td>水闸管理员</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <p>排队除了是有形的队列外，还可以是<strong>无形的队列</strong>。如几个顾客打电话到出租汽车站要求派车，如果出租汽车站无足够车辆，则部分顾客只得在各自的要车处等待，他们分散在不同地方，却形成了一个无形队列在等待派车。</p>

            <p>排队的可以是<strong>人</strong>，也可以是<strong>物</strong>。如超市收款台前排队交款的顾客；因故障而停止运转的机器在等待修理；码头上的船只等待装货或卸货；要降落的飞机因跑道被占用而在空中盘旋等。</p>

            <div class="definition">
                <h4>基本概念</h4>
                <p>为了一致起见，下面将要求得到服务的对象统称为<strong>"顾客"</strong>，将提供服务的服务者称为<strong>"服务员"</strong>或<strong>"服务机构"</strong>。因此，顾客与服务机构（服务员）的含义是广义的，可根据具体问题而不同。</p>
            </div>

            <p>实际的排队系统可以千差万别，但都可以一般地描述如下：顾客为了得到某种服务而到达系统，若不能立即获得服务而又允许排队等待，则加入等待队伍，待获得服务后离开系统。</p>

            <h3 id="intro-2">二、排队系统的描述</h3>
            <p>实际中的排队系统各有不同，但概括起来都由<strong>3个基本部分</strong>组成：<strong>输入过程</strong>、<strong>排队及排队规则</strong>和<strong>服务机制</strong>。</p>

            <button class="collapsible">🔍 1. 输入过程</button>
            <div class="content">
                <div class="content-inner">
                    <p>输入过程说明顾客按怎样的规律到达系统，需要从三个方面来刻画一个输入过程：</p>
                    <ul>
                        <li><strong>(1) 顾客总体（顾客源）数：</strong>可以是有限的，也可以是无限的。来到商店购物的顾客总体可近似认为是无限的，车间内停机待修的机器显然是有限的。</li>
                        <li><strong>(2) 到达方式：</strong>是单个到达还是成批到达。库存问题中，若把进来的货看成顾客，则为成批到达的例子。</li>
                        <li><strong>(3) 相继到达时间间隔的分布：</strong>这是刻画输入过程的最重要的内容。令$T_0 = 0, T_n$表示第$n$个顾客到达的时刻，则有$T_0 \leq T_1 \leq \cdots \leq T_n \leq \cdots$，记$X_n = T_n - T_{n-1}, n=1,2,\ldots$，则$X_n$是第$n$个顾客与第$n-1$个顾客到达的时间间隔。</li>
                    </ul>
                    <p>关于$\{X_n\}$的分布，排队论中经常用到的有<strong>定长分布(D)</strong>、<strong>泊松(Poisson)分布(M)</strong>、<strong>爱尔朗分布($E_k$)</strong>、<strong>任意分布(G)</strong>等几种。</p>
                    <div class="formula-block">
                        <p>其中泊松分布的概率密度函数为（式10.1）：</p>
                        $$A(t) = \begin{cases} \lambda e^{-\lambda t} & t \geq 0 \\ 0 & t < 0 \end{cases}$$
                        <p>式中$\lambda$为单位时间内平均到达的顾客数。</p>
                    </div>
                </div>
            </div>

            <button class="collapsible">🔍 2. 排队及排队规则</button>
            <div class="content">
                <div class="content-inner">
                    <h4>(1) 排队</h4>
                    <p>排队分为<strong>有限排队</strong>和<strong>无限排队</strong>两类：</p>
                    <ul>
                        <li><strong>有限排队：</strong>排队系统中的顾客数是有限的，即系统的空间是有限的。</li>
                        <li><strong>无限排队：</strong>系统中顾客数可以是无限的，队列可以排到无限长，这类系统又称为<strong>等待制排队系统</strong>。</li>
                    </ul>
                    
                    <p>对有限排队系统，可进一步分为两种：</p>
                    <ul>
                        <li><strong>① 损失制排队系统：</strong>排队空间为零的系统，实际上是不允许排队。当顾客到达系统时，如果所有服务台均被占用，则自动从排队系统离去。</li>
                        <li><strong>② 混合制排队系统：</strong>等待制和损失制系统的结合，一般是指允许排队，但又不允许队列无限长下去。</li>
                    </ul>

                    <h4>(2) 排队规则</h4>
                    <p>服务台对顾客进行服务所遵循的规则通常有：</p>
                    <ul>
                        <li><strong>① 先来先服务(FCFS)：</strong>按顾客到达的先后对顾客进行服务，这是最普遍的情形。</li>
                        <li><strong>② 后来先服务(LCFS)：</strong>在许多库存系统中会出现这种情形。</li>
                        <li><strong>③ 具有优先权的服务(PS)：</strong>服务台根据顾客的优先权进行服务，优先权高的先接受服务。</li>
                    </ul>
                </div>
            </div>

            <button class="collapsible">🔍 3. 服务机制</button>
            <div class="content">
                <div class="content-inner">
                    <p>排队系统的服务机制主要包括：</p>
                    <ul>
                        <li>服务员的数量及其连接形式（串联或并联）</li>
                        <li>顾客是单个还是成批接受服务</li>
                        <li>服务时间的分布</li>
                    </ul>
                    
                    <p>常见的服务时间分布有：</p>
                    
                    <div class="formula-block">
                        <p><strong>(1) 定长分布(D)：</strong>每个顾客接受服务的时间是一个确定的常数。</p>
                        
                        <p><strong>(2) 负指数分布(M)：</strong>每个顾客接受服务的时间相互独立，具有相同的负指数分布（式10.2）：</p>
                        $$b(t) = \begin{cases} \mu e^{-\mu t} & t \geq 0 \\ 0 & t < 0 \end{cases}$$
                        <p>其中，$\mu > 0$，为一常数。</p>
                        
                        <p><strong>(3) $k$阶爱尔朗分布($E_k$)：</strong>每个顾客接受服务的时间服从$k$阶爱尔朗分布，其密度函数为（式10.3）：</p>
                        $$b(t) = \frac{k\mu (k\mu t)^{k-1}}{(k-1)!} e^{-k\mu t}$$
                    </div>

                    <div class="note">
                        <strong>💡 重要性质：</strong>爱尔朗分布比负指数分布具有更广泛的适应性。当$k=1$时，爱尔朗分布即为负指数分布；当$k \to \infty$时，爱尔朗分布逐渐变为对称的，当$k \geq 30$以后，爱尔朗分布近似于正态分布。
                    </div>
                </div>
            </div>

            <h3 id="intro-3">三、排队系统的符号表示</h3>
            <p>根据输入过程、排队规则和服务机制的变化对排队模型进行描述或分类，可给出很多排队模型。为了方便对众多模型的描述，D. G. Kendall提出了一种目前在排队论中被广泛采用的<strong>"Kendall记号"</strong>，其一般形式为：</p>
            
            <div class="formula-block">
                $$X/Y/Z/A/B/C$$
            </div>

            <p>其中：</p>
            <ul>
                <li><strong>X</strong>表示顾客相继到达时间间隔的分布</li>
                <li><strong>Y</strong>表示服务时间的分布</li>
                <li><strong>Z</strong>表示并联服务台的个数</li>
                <li><strong>A</strong>表示系统的容量，即可容纳的最多顾客数</li>
                <li><strong>B</strong>表示顾客源的数目</li>
                <li><strong>C</strong>表示服务规则</li>
            </ul>

            <div class="note">
                <strong>💡 约定：</strong>如果Kendall记号中略去后3项时，即是指$X/Y/Z/\infty/\infty/FCFS$的情形。例如$M/M/1/\infty/\infty/FCFS$可表示为$M/M/1$。
            </div>

            <h3 id="intro-4">四、排队系统的主要数量指标和记号</h3>
            <p>研究排队系统的目的是通过了解系统运行的状况，对系统进行调整和控制，使系统处于最优运行状态。因此，首先需要弄清系统的运行状况。描述一个排队系统运行状况的主要数量指标有：</p>

            <button class="collapsible">📊 1. 队长和排队长</button>
            <div class="content">
                <div class="content-inner">
                    <ul>
                        <li><strong>队长：</strong>系统中的顾客数（排队等待的顾客数与正在接受服务的顾客数之和）</li>
                        <li><strong>排队长：</strong>系统中正在排队等待服务的顾客数</li>
                    </ul>
                    <p>队长和排队长一般都是随机变量。对这两个指标进行研究时，当然是希望能确定它们的分布，或至少能确定它们的平均值（即平均队长和平均排队长）及有关的矩（如方差等）。</p>
                </div>
            </div>

            <button class="collapsible">📊 2. 等待时间和逗留时间</button>
            <div class="content">
                <div class="content-inner">
                    <ul>
                        <li><strong>等待时间：</strong>从顾客到达时刻起到他开始接受服务止的这段时间</li>
                        <li><strong>逗留时间：</strong>从顾客到达时刻起到他接受服务完成止的这段时间</li>
                    </ul>
                    <p>这两个指标都是顾客最关心的，因为顾客通常是希望等待时间越短越好。</p>
                </div>
            </div>

            <button class="collapsible">📊 3. 忙期和闲期</button>
            <div class="content">
                <div class="content-inner">
                    <ul>
                        <li><strong>忙期：</strong>从顾客到达空闲着的服务机构起，到服务机构再次成为空闲止的这段时间</li>
                        <li><strong>闲期：</strong>服务机构连续保持空闲的时间</li>
                    </ul>
                    <p>在排队系统中，忙期和闲期总是交替出现的。这是服务员最为关心的指标，因为它关系到服务员的服务强度。</p>
                </div>
            </div>

            <div class="definition">
                <h4>常用记号</h4>
                <p>下面给出上述一些主要数量指标的常用记号：</p>
                <ul>
                    <li>$N(t)$：时刻$t$系统中的顾客数（队长）</li>
                    <li>$N_q(t)$：时刻$t$系统中排队的顾客数（排队长）</li>
                    <li>$T(t)$：时刻$t$到达系统的顾客在系统中的逗留时间</li>
                    <li>$T_q(t)$：时刻$t$到达系统的顾客在系统中的等待时间</li>
                    <li>$N$：系统处于平稳状态时的队长，其均值为$L$，称为<strong>平均队长</strong></li>
                    <li>$N_q$：系统处于平稳状态时的排队长，其均值为$L_q$，称为<strong>平均排队长</strong></li>
                    <li>$T$：系统处于平稳状态时顾客的逗留时间，其均值记为$W$，称为<strong>平均逗留时间</strong></li>
                    <li>$T_q$：系统处于平稳状态时顾客的等待时间，其均值记为$W_q$，称为<strong>平均等待时间</strong></li>
                    <li>$\lambda_n$：当系统处于状态$n$时，新来顾客的平均到达率（单位时间内来到系统的平均顾客数）</li>
                    <li>$\mu_n$：当系统处于状态$n$时，整个系统的平均服务率（单位时间内可以服务完的顾客数）</li>
                    <li>$\rho = \frac{\lambda}{\mu}$：称为系统的<strong>服务强度</strong></li>
                </ul>
            </div>

            <h3 id="intro-5">五、排队论研究的基本问题</h3>
            <p>排队论研究的首要问题是排队系统主要数量指标的概率规律，即研究系统的整体性质，然后进一步研究系统的优化问题。与这两个问题相关的还包括排队系统的统计推断问题。</p>
            
            <ul>
                <li><strong>(1)</strong> 通过研究主要数量指标在瞬时或平稳状态下的概率分布及其数字特征，了解系统运行的基本特征。</li>
                <li><strong>(2)</strong> 统计推断问题，建立适当的排队模型是排队论研究的第一步。</li>
                <li><strong>(3)</strong> 系统优化问题，又称为系统控制问题或系统运营问题，其基本目的是使系统处于最优或最合理的状态。</li>
            </ul>
        </section>

        <!-- 第二节：生灭过程和Poisson过程 -->
        <section id="section2">
            <h2>第二节 生灭过程和Poisson过程</h2>
            
            <h3 id="section2-1">一、生灭过程简介</h3>
            <p>一类非常重要且广泛存在的排队系统是<strong>生灭过程排队系统</strong>。生灭过程是一类特殊的随机过程，在生物学、物理学、运筹学中有广泛的应用。</p>

            <div class="definition">
                <h4>定义1 生灭过程</h4>
                <p>设$\{N(t), t \geq 0\}$为一个随机过程。若$N(t)$的概率分布只有以下性质：</p>
                <ul>
                    <li><strong>(1)</strong> 假设$N(t)=n$，则从时刻$t$起到下一个顾客到达时刻止的时间服从参数为$\lambda_n$的负指数分布，$n=0,1,2,\ldots$</li>
                    <li><strong>(2)</strong> 假设$N(t)=n$，则从时刻$t$起到下一个顾客离去时刻止的时间服从参数为$\mu_n$的负指数分布，$n=0,1,2,\ldots$</li>
                    <li><strong>(3)</strong> 同一时刻时只有一个顾客到达或离去。</li>
                </ul>
                <p>则称$\{N(t), t \geq 0\}$为一个<strong>生灭过程</strong>。</p>
            </div>

            <p>一般来说，得到$N(t)$的分布$p_n(t) = P\{N(t)=n\}$（$n=0,1,2,\ldots$）是比较困难的，因此通常是求当系统达到平稳状态后的状态分布，记为$p_n, n=0,1,2,\ldots$</p>

            <p>为求平稳分布，考虑系统可能处的任一状态$n$。假设记录了一段时间内系统进入状态$n$和离开状态$n$的次数，则因为"进入"和"离开"是交替发生的，所以这两个数要么相等，要么相差为1。</p>

            <div class="theorem">
                <h4>"流入-流出"原理</h4>
                <p>当系统运行相当时间而达到平稳状态后，对任一状态$n$来说，单位时间内进入该状态的平均次数和单位时间内离开该状态的平均次数应该相等。</p>
            </div>

            <p>根据这一原理，可得到状态为$0,1,2,\ldots,n,\ldots$时的<strong>平衡方程</strong>如下（式10.4）：</p>

            <div class="formula-block">
                $$\begin{aligned}
                0:& \quad \mu_1 p_1 = \lambda_0 p_0 \\
                1:& \quad \lambda_0 p_0 + \mu_2 p_2 = (\lambda_1 + \mu_1) p_1 \\
                2:& \quad \lambda_1 p_1 + \mu_3 p_3 = (\lambda_2 + \mu_2) p_2 \\
                & \quad \vdots \\
                n-1:& \quad \lambda_{n-2} p_{n-2} + \mu_n p_n = (\lambda_{n-1} + \mu_{n-1}) p_{n-1} \\
                n:& \quad \lambda_{n-1} p_{n-1} + \mu_{n+1} p_{n+1} = (\lambda_n + \mu_n) p_n \\
                & \quad \vdots
                \end{aligned}$$
            </div>

            <p>由上述平衡方程，可求得（式10.5-10.7）：</p>

            <div class="formula-block">
                $$C_n = \frac{\lambda_{n-1}\lambda_{n-2}\cdots\lambda_0}{\mu_n\mu_{n-1}\cdots\mu_1} \quad (n=1,2,\cdots)$$
                
                $$p_n = C_n p_0 \quad (n=1,2,\cdots)$$
                
                $$p_0 = \frac{1}{1 + \sum_{n=1}^{\infty} C_n}$$
            </div>

            <div class="note">
                <strong>⚠️ 注意：</strong>式(10.7)只有当级数$\sum_{n=1}^{\infty} C_n$收敛时才有意义，即当$\sum_{n=1}^{\infty} C_n < \infty$时，才能由上述公式得到平稳状态的概率分布。
            </div>

            <h3 id="section2-2">二、Poisson过程和负指数分布</h3>
            <p>Poisson过程（又称为Poisson流、最简流）是排队论中经常用到的一种用来描述顾客到达规律的特殊随机过程。实际上，它是一个纯生过程，与概率论中的Poisson分布和负指数分布有密切的联系。</p>

            <div class="definition">
                <h4>定义2 Poisson过程</h4>
                <p>设$N(t)$为时间$[0,t]$内到达系统的顾客数，如果满足下面三个条件：</p>
                <ul>
                    <li><strong>(1) 平稳性：</strong>在$[t, t+\Delta t]$内有一个顾客到达的概率为$\lambda\Delta t + o(\Delta t)$</li>
                    <li><strong>(2) 独立性：</strong>任意两个不相交区间内顾客到达情况相互独立</li>
                    <li><strong>(3) 普通性：</strong>在$[t, t+\Delta t]$内多于一个顾客到达的概率为$o(\Delta t)$</li>
                </ul>
                <p>则称$\{N(t), t \geq 0\}$为<strong>Poisson过程</strong>。</p>
            </div>

            <div class="theorem">
                <h4>定理1</h4>
                <p>设$N(t)$为时间$[0,t]$内到达系统的顾客数，则$\{N(t), t \geq 0\}$为Poisson过程的充分必要条件是（式10.8）：</p>
                <div class="formula-block">
                    $$P\{N(t) = n\} = \frac{(\lambda t)^n}{n!} e^{-\lambda t} \quad (n=1,2,\cdots)$$
                </div>
            </div>

            <div class="theorem">
                <h4>定理2</h4>
                <p>设$N(t)$为时间$[0,t]$内到达系统的顾客数，则$\{N(t), t \geq 0\}$为参数为$\lambda$的Poisson过程的充分必要条件是：相继到达时间间隔服从相互独立的参数为$\lambda$的负指数分布。</p>
            </div>

            <div class="note">
                <strong>💡 重要结论：</strong>定理2说明，顾客相继到达时间间隔服从相互独立的参数为$\lambda$的负指数分布，与到达过程为参数为$\lambda$的Poisson过程是等价的。
            </div>
        </section>

        <!-- 第三节：M/M/s等待制排队模型 -->
        <section id="section3">
            <h2>第三节 M/M/s等待制排队模型</h2>
            
            <h3 id="section3-1">一、单服务台模型</h3>
            <p>单服务台等待制模型$M/M/1/\infty$是指：顾客的相继到达时间服从参数为$\lambda$的负指数分布，服务台个数为1，服务时间$V$服从参数为$\mu$的负指数分布，系统空间无限，允许无限排队，这是一类最简单的排队系统。</p>

            <button class="collapsible">📐 1. 队长的分布</button>
            <div class="content">
                <div class="content-inner">
                    <p>记$p_n = P\{N=n\}$（$n=0,1,2,\ldots$）为系统达到平稳状态后队长$N$的概率分布，则由式(10.5)、式(10.6)和式(10.7)，并注意到$\lambda_n = \lambda, n=0,1,2,\ldots$和$\mu_n = \mu, n=1,2,\ldots$</p>
                    
                    <p>记$\rho = \frac{\lambda}{\mu}$，并设$\rho < 1$，则由式(10.5)和式(10.6)得（式10.9-10.10）：</p>
                    
                    <div class="formula-block">
                        $$C_n = \left(\frac{\lambda}{\mu}\right)^n = \rho^n \quad (n=1,2,\cdots)$$
                        
                        $$p_n = \rho^n p_0 \quad (n=1,2,\cdots)$$
                        
                        $$p_0 = \frac{1}{1+\sum_{n=1}^{\infty}\rho^n} = \left(\sum_{n=0}^{\infty}\rho^n\right)^{-1} = \left(\frac{1}{1-\rho}\right)^{-1} = 1-\rho$$
                    </div>

                    <p>因此：</p>
                    <div class="formula-block">
                        $$p_n = (1-\rho)\rho^n \quad n=0,1,2,\cdots$$
                    </div>

                    <div class="note">
                        <strong>💡 重要含义：</strong>$\rho$是系统中至少有一个顾客的概率，也就是服务台处于忙的状态的概率，因而也称$\rho$为<strong>服务强度</strong>，它反映了系统繁忙的程度。此外，式(10.9)、式(10.10)只有在$\rho = \frac{\lambda}{\mu} < 1$的条件下才能得到，即要求顾客的平均到达率小于系统的平均服务率，才能使系统达到统计平衡。
                    </div>
                </div>
            </div>

            <button class="collapsible">📊 2. 几个主要数量指标</button>
            <div class="content">
                <div class="content-inner">
                    <p>对单服务台等待制排队系统，由已得到的平稳状态下队长的分布，可以得到平均队长$L$为（式10.11）：</p>
                    
                    <div class="formula-block">
                        $$\begin{aligned}
                        L &= \sum_{n=0}^{\infty} n p_n = \sum_{n=1}^{\infty} n(1-\rho)\rho^n \\
                        &= (\rho + 2\rho^2 + 3\rho^3 + \cdots) - (\rho^2 + 2\rho^3 + 3\rho^4 + \cdots) \\
                        &= \rho + \rho^2 + \rho^3 + \cdots = \frac{\rho}{1-\rho} = \frac{\lambda}{\mu-\lambda}
                        \end{aligned}$$
                    </div>

                    <p>平均排队长$L_q$为（式10.12）：</p>
                    <div class="formula-block">
                        $$L_q = \sum_{n=1}^{\infty} (n-1)p_n = L - (1-p_0) = L - \rho = \frac{\rho^2}{1-\rho} = \frac{\lambda^2}{\mu(\mu-\lambda)}$$
                    </div>

                    <p>顾客在系统中的逗留时间$T$，可证明它服从参数为$\mu-\lambda$的负指数分布，即（式10.13）：</p>
                    <div class="formula-block">
                        $$P\{T > t\} = e^{-(\mu-\lambda)t}, \quad t \geq 0$$
                        $$W = E(T) = \frac{1}{\mu-\lambda}$$
                    </div>

                    <p>因为顾客在系统中的逗留时间为等待时间和接受服务时间之和，即$T = T_q + V$，由$W = E(T) = E(T_q) + E(V)$，可得平均等待时间$W_q$为（式10.14-10.15）：</p>
                    <div class="formula-block">
                        $$W = W_q + \frac{1}{\mu}$$
                        $$W_q = W - \frac{1}{\mu} = \frac{1}{\mu-\lambda} - \frac{1}{\mu} = \frac{\lambda}{\mu(\mu-\lambda)}$$
                    </div>

                    <div class="theorem">
                        <h4>Little公式</h4>
                        <p>从式(10.11)和式(10.13)，可发现平均队长$L$与平均逗留时间$W$具有如下关系（式10.16）：</p>
                        <div class="formula-block">
                            $$L = \lambda W$$
                        </div>
                        <p>同样，从式(10.12)和式(10.15)，可发现平均排队长$L_q$与平均等待时间$W_q$有如下关系（式10.17）：</p>
                        <div class="formula-block">
                            $$L_q = \lambda W_q$$
                        </div>
                        <p>式(10.16)和式(10.17)通常称为<strong>Little公式</strong>，是排队论中一个非常重要的公式。</p>
                    </div>
                </div>
            </div>

            <div class="example">
                <h4>例1</h4>
                <p><strong>问题：</strong>某修理店只有一个修理工，要求提供服务的顾客到达过程为Poisson流，平均4人/h；修理时间服从负指数分布，平均需要6min。试求：</p>
                <ol>
                    <li>修理店空闲的概率</li>
                    <li>店内恰有3个顾客的概率</li>
                    <li>店内至少有1个顾客的概率</li>
                    <li>在店内的平均顾客数</li>
                    <li>每位顾客在店内的平均逗留时间</li>
                    <li>等待服务的平均顾客数</li>
                    <li>每位顾客平均等待服务时间</li>
                    <li>顾客在店内等待时间超过10min的概率</li>
                </ol>
                
                <div class="solution">
                    <strong>解：</strong>
                    <p>本例可看成一个$M/M/1/\infty$排队问题，其中$\lambda = 4, \mu = \frac{1}{0.1} = 10, \rho = \frac{\lambda}{\mu} = \frac{2}{5}$</p>
                    
                    <p>(1) 修理店空闲的概率：$p_0 = 1-\rho = 1-\frac{2}{5} = 0.6$</p>
                    
                    <p>(2) 店内恰有3个顾客的概率：$p_3 = \rho^3(1-\rho) = \left(\frac{2}{5}\right)^3\left(1-\frac{2}{5}\right) = 0.038$</p>
                    
                    <p>(3) 店内至少有1个顾客的概率：$P\{N \geq 1\} = 1-p_0 = \rho = \frac{2}{5} = 0.4$</p>
                    
                    <p>(4) 在店内的平均顾客数：$L = \frac{\rho}{1-\rho} = \frac{2/5}{1-2/5} = 0.67$（人）</p>
                    
                    <p>(5) 每位顾客在店内的平均逗留时间：$W = \frac{L}{\lambda} = \frac{0.67}{4}$(h)$ = 10$(min)</p>
                    
                    <p>(6) 等待服务的平均顾客数：$L_q = L-\rho = 0.67-0.4 = 0.267$（人）</p>
                    
                    <p>(7) 每位顾客平均等待服务时间：$W_q = \frac{L_q}{\lambda} = \frac{0.267}{4}$(h)$ = 4$(min)</p>
                    
                    <p>(8) 顾客在店内逗留时间超过10min的概率：$P\{T > 10\} = e^{-(\mu-\lambda)\cdot\frac{10}{60}} = e^{-1} = 0.3679$</p>
                </div>
            </div>

            <h3 id="section3-2">二、多服务台模型</h3>
            <p>设顾客单个到达，相继到达时间间隔服从参数为$\lambda$的负指数分布，系统中共有$s$个服务台，每个服务台的服务时间相互独立，且服从参数为$\mu$的负指数分布。当顾客到达时，若有空闲的服务台则可以马上接受服务，否则便排成一个队列等待，等待空间为无限。</p>

            <p>记$p_n = P\{N=n\}$（$n=0,1,2,\ldots$）为系统达到平稳状态后队长$N$的概率分布，注意到对个数为$s$的多服务台系统，有：</p>
            
            <div class="formula-block">
                $$\lambda_n = \lambda \quad n=0,1,2,\ldots$$
                
                $$\mu_n = \begin{cases}
                n\mu & n=1,2,\ldots,s \\
                s\mu & n=s,s+1,\ldots
                \end{cases}$$
            </div>

            <p>记$\rho_0 = \frac{\lambda}{s\mu}$，则当$\rho_0 < 1$时，由式(10.5)、式(10.6)和式(10.7)，有（式10.20-10.22）：</p>

            <div class="formula-block">
                $$C_n = \begin{cases}
                \frac{(\lambda/\mu)^n}{n!} & n=1,2,\ldots,s \\
                \frac{(\lambda/\mu)^s}{s!}\left(\frac{\lambda}{s\mu}\right)^{n-s} = \frac{(\lambda/\mu)^n}{s!s^{n-s}} & n \geq s
                \end{cases}$$
                
                $$p_n = C_n p_0 \quad (n=1,2,\cdots)$$
                
                $$p_0 = \left[\sum_{n=0}^{s-1}\frac{\rho^n}{n!} + \frac{\rho^s}{s!(1-\rho_0)}\right]^{-1} \quad \rho_0 \neq 1$$
            </div>

            <div class="definition">
                <h4>Erlang等待公式</h4>
                <p>式(10.23)称为Erlang等待公式，它给出了顾客到达系统时需要等待的概率（式10.23）：</p>
                <div class="formula-block">
                    $$c(s,\rho) = \sum_{n=s}^{\infty}p_n = \frac{\rho^s}{s!(1-\rho_0)}p_0$$
                </div>
            </div>

            <p>对多服务台等待制排队系统，由已得到的平稳分布可得平均排队长$L_q$为（式10.24-10.25）：</p>

            <div class="formula-block">
                $$L_q = \sum_{n=s+1}^{\infty}(n-s)p_n = \frac{p_0\rho^s}{s!}\cdot\frac{d}{d\rho_0}\left(\sum_{n=1}^{\infty}\rho_0^n\right) = \frac{p_0\rho^s\rho_0}{s!(1-\rho_0)^2}$$
                
                $$L_q = \frac{c(s,\rho)\rho_0}{1-\rho_0}$$
            </div>

            <div class="example">
                <h4>例2</h4>
                <p><strong>问题：</strong>考虑一个医院急诊室的管理问题。根据统计资料，急诊病人相继到达的时间间隔服从负指数分布，平均每0.5h来一个；医生处理一个病人的时间也服从负指数分布，平均需要20min。该急诊室已有一个医生，管理人员现考虑是否需要再增加一个医生。</p>
                
                <div class="solution">
                    <strong>解：</strong>
                    <p>本问题可看成一个$M/M/s$排队问题，其中（时间以h为单位）$\lambda = 2, \mu = 3, \rho = \frac{\lambda}{\mu} = \frac{2}{3}$</p>
                    
                    <p>根据前面得到的关于单服务台和多服务台等待制排队系统的结果，可将有关计算结果列于表10-2中：</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>项目</th>
                                <th>$s=1$</th>
                                <th>$s=2$</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>空闲概率$p_0$</td><td>0.333</td><td>0.5</td></tr>
                            <tr><td>有1个病人的概率$p_1$</td><td>0.222</td><td>0.333</td></tr>
                            <tr><td>有2个病人的概率$p_2$</td><td>0.148</td><td>0.111</td></tr>
                            <tr><td>平均病人数$L$</td><td>2</td><td>0.75</td></tr>
                            <tr><td>平均等待病人数$L_q$</td><td>1.333</td><td>0.083</td></tr>
                            <tr><td>病人平均逗留时间$W$(h)</td><td>1</td><td>0.375</td></tr>
                            <tr><td>病人平均等待时间$W_q$(h)</td><td>0.667</td><td>0.042</td></tr>
                            <tr><td>病人需要等待的概率$P\{T_q > 0\}$</td><td>0.667</td><td>0.167</td></tr>
                            <tr><td>等待时间超过0.5小时的概率$P\{T_q > 0.5\}$</td><td>0.404</td><td>0.022</td></tr>
                            <tr><td>等待时间超过1小时的概率$P\{T_q > 1\}$</td><td>0.245</td><td>0.003</td></tr>
                        </tbody>
                    </table>
                    
                    <p>由表10-2的结果可知，从减少病人的等待时间，为急诊病人提供及时的处理来看，一个医生是不够的。</p>
                </div>
            </div>
        </section>

        <!-- 第四节：M/M/s混合制排队模型 -->
        <section id="section4">
            <h2>第四节 M/M/s混合制排队模型</h2>
            
            <h3 id="section4-1">一、单服务台混合制模型</h3>
            <p>单服务台混合制模型$M/M/1/K$是指：顾客的相继到达时间服从参数为$\lambda$的负指数分布（即顾客的到达过程为Poisson流），服务台个数为1，服务时间$V$服从参数为$\mu$的负指数分布，系统的空间为$K$。</p>

            <p>首先，仍来求平稳状态下队长$N$的分布$p_n = P\{N=n\}, n=0,1,2,\ldots$。由于所考虑的排队系统中最多只能容纳$K$个顾客（等待位置只有$K-1$个），因而有：</p>

            <div class="formula-block">
                $$\lambda_n = \begin{cases}
                \lambda & n=0,1,2,\ldots,K-1 \\
                0 & n \geq K
                \end{cases}$$
                
                $$\mu_n = \mu \quad n=1,2,\ldots,K$$
            </div>

            <p>由式(10.5)、式(10.6)和式(10.7)，有（式10.29-10.30）：</p>

            <div class="formula-block">
                $$C_n = \begin{cases}
                \left(\frac{\lambda}{\mu}\right)^n = \rho^n & n=1,2,\ldots,K \\
                0 & n > K
                \end{cases}$$
                
                $$p_n = \rho^n p_0 \quad n=1,2,\ldots,K$$
                
                $$p_0 = \frac{1}{1+\sum_{n=1}^{K}\rho^n} = \begin{cases}
                \frac{1-\rho}{1-\rho^{K+1}} & \rho \neq 1 \\
                \frac{1}{K+1} & \rho = 1
                \end{cases}$$
            </div>

            <p>由已得到的单服务台混合制排队系统平稳状态下队长的分布，可知当$\rho \neq 1$时，平均队长$L$为（式10.31）：</p>

            <div class="formula-block">
                $$L = \sum_{n=0}^{K} np_n = p_0\rho\sum_{n=1}^{K}n\rho^{n-1} = \frac{\rho}{1-\rho} - \frac{(K+1)\rho^{K+1}}{1-\rho^{K+1}}$$
            </div>

            <p>当$\rho = 1$时，$L = \frac{K}{2}$</p>

            <p>由于排队系统的容量有限，只有$K-1$个排队位置，因此，当系统空间被占满时，再来的顾客将不能进入系统排队。假设顾客的到达率（单位时间内来到系统的顾客的平均数）为$\lambda$，则当系统处于状态$K$时，顾客不能进入系统，即顾客可进入系统的概率是$1-p_K$。因此，单位时间内实际可进入系统的顾客的平均数为（式10.35）：</p>

            <div class="formula-block">
                $$\lambda_e = \lambda(1-p_K) = \mu(1-p_0)$$
            </div>

            <p>称$\lambda_e$为<strong>有效到达率</strong>，而$p_K$也被称为<strong>顾客损失率</strong>，它表示了在来到系统的所有顾客数中不能进入系统的顾客的比例。</p>

            <div class="example">
                <h4>例4</h4>
                <p><strong>问题：</strong>某修理站只有一个修理工，且站内最多只能停放4台待修的机器。设待修机器按Poisson流到达修理站，平均每分钟到达1台；修理时间服从负指数分布，平均每1.25min可修理1台，试求该系统的有关指标。</p>
                
                <div class="solution">
                    <strong>解：</strong>
                    <p>该系统可看成一个$M/M/1/4$排队系统，其中$\lambda = 1, \mu = \frac{1}{1.25} = 0.8, \rho = \frac{\lambda}{\mu} = 1.25, K = 4$</p>
                    
                    <p>由式(10.30)得：$p_0 = \frac{1-1.25}{1-1.25^5} = 0.122$</p>
                    
                    <p>因而，顾客损失率为：$p_4 = \frac{\rho^K}{1-\rho^{K+1}}p_0 = 1.25^4 \times 0.122 = 0.298$</p>
                    
                    <p>有效到达率为：$\lambda_e = \lambda(1-p_4) = 1 \times (1-0.298) = 0.702$</p>
                    
                    <p>平均队长：$L = \frac{1.25}{1-1.25} - \frac{(4+1) \times 1.25^5}{1-1.25^5} = 2.44$（台）</p>
                    
                    <p>平均排队长：$L_q = L - (1-p_0) = 2.44 - (1-0.122) = 1.56$（台）</p>
                    
                    <p>平均逗留时间：$W = \frac{L}{\lambda_e} = \frac{2.44}{0.702} = 3.48$(min)</p>
                    
                    <p>平均等待时间：$W_q = W - \frac{1}{\mu} = 3.48 - 1.25 = 2.23$(min)</p>
                </div>
            </div>

            <h3 id="section4-2">二、多服务台混合制模型</h3>
            <p>多服务台混合制模型$M/M/s/K$是指顾客的相继到达时间服从参数为$\lambda$的负指数分布（即顾客的到达过程为Poisson流），服务台个数为$s$，每个服务台服务时间相互独立，且服从参数为$\mu$的负指数分布，系统的空间为$K$。</p>

            <p>由式(10.5)、式(10.6)和式(10.7)，并注意到在本模型中：</p>

            <div class="formula-block">
                $$\lambda_n = \begin{cases}
                \lambda & n=0,1,2,\ldots,K-1 \\
                0 & n \geq K
                \end{cases}$$
                
                $$\mu_n = \begin{cases}
                n\mu & 0 \leq n < s \\
                s\mu & s \leq n \leq K
                \end{cases}$$
            </div>

            <p>于是（式10.44）：</p>

            <div class="formula-block">
                $$p_n = \begin{cases}
                \frac{\rho^n}{n!}p_0 & 0 \leq n < s \\
                \frac{\rho^n}{s!s^{n-s}}p_0 & s \leq n \leq K
                \end{cases}$$
                
                $$p_0 = \left[\sum_{n=0}^{s-1}\frac{\rho^n}{n!} + \frac{\rho^s(1-\rho_0^{K-s+1})}{s!(1-\rho_0)}\right]^{-1} \quad \rho_0 \neq 1$$
            </div>

            <div class="example">
                <h4>例5</h4>
                <p><strong>问题：</strong>某汽车加油站设有两台加油机，汽车按Poisson流到达，平均每分钟到达2辆；汽车加油时间服从负指数分布，平均加油时间为2min。又知加油站上最多只能停放3辆等待加油的汽车，汽车到达时，若已满员，则必须开到别的加油站去，试对该系统进行分析。</p>
                
                <div class="solution">
                    <strong>解：</strong>
                    <p>可将该系统看作一个$M/M/2/5$排队系统，其中$\lambda = 2, \mu = 0.5, \rho = \frac{\lambda}{\mu} = 4, s = 2, K = 5$</p>
                    
                    <p>(1) 系统空闲的概率：$p_0 = 0.008$</p>
                    
                    <p>(2) 顾客损失率：$p_5 = 0.512$</p>
                    
                    <p>(3) 加油站内在等待的平均汽车数：$L_q = 2.18$（辆）</p>
                    
                    <p>(4) 加油站内汽车的平均数：$L = L_q + \rho(1-p_5) = 2.18 + 4(1-0.512) = 4.13$（辆）</p>
                    
                    <p>(5) 汽车在加油站内平均逗留时间：$W = \frac{L}{\lambda(1-p_5)} = \frac{4.13}{2(1-0.512)} = 4.23$(min)</p>
                    
                    <p>(6) 被占用的加油机的平均数：$\bar{s} = L - L_q = 4.13 - 2.18 = 1.95$（台）</p>
                </div>
            </div>
        </section>

        <!-- 第五节：其他排队模型简介 -->
        <section id="section5">
            <h2>第五节 其他排队模型简介</h2>
            
            <h3>一、有限源排队模型</h3>
            <p>现在，来分析一下顾客源为有限的排队问题。这类排队问题的主要特征是顾客总数是有限的，如只有$m$个顾客。每个顾客来到系统中接受服务后仍回到原来的总体，还有可能再来，这类排队问题的典型例子是<strong>机器看管问题</strong>。</p>

            <p>如一个工人同时看管$m$台机器，当机器发生故障时即停下来等待修理，修好后再投入使用，且仍然可能再发生故障。</p>

            <p>关于顾客的平均到达率，在无限源的情形中是按全体顾客来考虑的，而在有限源的情形下，必须按每一个顾客来考虑。设每一个顾客的到达率都是相同的，均为$\lambda$（这里$\lambda$的含义是指单位时间内该顾客来到系统请求服务的次数），且每一个顾客在系统外的时间均服从参数为$\lambda$的负指数分布。</p>

            <p>由于在系统外的顾客的平均数为$m-L$，故系统的有效到达率为：</p>
            <div class="formula-block">
                $$\lambda_e = \lambda(m-L)$$
            </div>

            <p>对单服务台（$s=1$）系统，有（式10.66-10.72）：</p>

            <div class="formula-block">
                $$p_n = \frac{m!}{(m-n)!}\rho^n p_0 \quad n=1,\ldots,m$$
                
                $$p_0 = \left[\sum_{n=0}^{m}\frac{m!}{(m-n)!}\rho^n\right]^{-1}$$
                
                $$L_q = \sum_{n=1}^{m}(n-1)p_n$$
                
                $$L = L_q + (1-p_0)$$
                
                $$L = m - \frac{\mu}{\lambda}(1-p_0)$$
                
                $$W = \frac{L}{\lambda_e} = \frac{m}{\mu(1-p_0)\lambda}, \quad W_q = W - \frac{1}{\mu}$$
                
                $$A = \lambda_e Q = \lambda(m-L) = \mu(1-p_0)$$
            </div>

            <h3>二、服务率或到达率依赖状态的排队模型</h3>
            <p>在前面的各类排队模型的分析中，均假设顾客的到达率为常数$\lambda$，服务台的服务率也为常数$\mu$。而在实际的排队问题中，到达率或服务率可能是随系统的状态而变化的。</p>

            <p>例如，当系统中顾客数已经比较多时，后来的顾客可能不愿意再进入系统；服务员的服务率当顾客较多时也可能会提高。</p>

            <p>因此，对单服务台系统，实际的到达率和服务率（它们均依赖于系统所处的状态$n$）可假设为：</p>

            <div class="formula-block">
                $$\mu_n = n^2\mu_1 \quad (n=1,2,\ldots)$$
                
                $$\lambda_n = \frac{\lambda_0}{(n+1)^b} \quad (n=0,1,2,\ldots)$$
            </div>

            <h3>三、非生灭过程排队模型</h3>
            <p>一个排队系统的特征是由输入过程，服务机制和排队规则决定的。本章前面所讨论的排队模型都是输入过程为Poisson流，服务时间服从负指数分布的生灭过程排队模型。</p>

            <button class="collapsible">📊 1. M/G/1排队模型</button>
            <div class="content">
                <div class="content-inner">
                    <p>$M/G/1$系统是指顾客的到达为Poisson流，单个服务台，服务时间为一般分布的排队系统。现假设顾客的平均到达率为$\lambda$，服务时间的均值为$\frac{1}{\mu}$，方差为$\sigma^2$，则可证明：当$\rho = \frac{\lambda}{\mu} < 1$时，系统可以达到平稳状态，已有的几个结果为（式10.81-10.85）：</p>
                    
                    <div class="formula-block">
                        $$p_0 = 1-\rho$$
                        
                        $$L_q = \frac{\lambda^2\sigma^2 + \rho^2}{2(1-\rho)}$$
                        
                        $$L = \rho + L_q$$
                        
                        $$W_q = \frac{L_q}{\lambda}$$
                        
                        $$W = W_q + \frac{1}{\mu}$$
                    </div>

                    <div class="theorem">
                        <h4>Pollaczek-Khintchine（P-K）公式</h4>
                        <p>由式(10.82)可看出，$L_q, L, W, W_q$等仅依赖于$\rho$和服务时间的方差$\sigma^2$，而与分布的类型没有关系，这是排队论中一个非常重要且令人惊奇的结果，式(10.82)通常被称为<strong>Pollaczek-Khintchine（P-K）公式</strong>。</p>
                    </div>
                </div>
            </div>

            <button class="collapsible">📊 2. 爱尔朗（Erlang）排队模型</button>
            <div class="content">
                <div class="content-inner">
                    <p>在本章第一节中已指出，爱尔朗分布族比负指数分布族对现实世界具有更广泛的适应性。因此，下面介绍一个最简单的爱尔朗排队模型。由于服务时间为$k$阶Erlang分布，其分布密度函数为（式10.86）：</p>
                    
                    <div class="formula-block">
                        $$a(t) = \frac{\mu k(\mu k t)^{k-1}}{(k-1)!}e^{-\mu kt}, \quad t \geq 0$$
                    </div>

                    <p>故其均值和方差分别为：$E(E_k) = \frac{1}{\mu}, \text{Var}(E_k) = \frac{1}{k\mu^2}$</p>

                    <p>将$\rho = \frac{\lambda}{\mu}, \sigma^2 = \frac{1}{k\mu^2}$代入式(10.82)～式(10.85)，得（式10.87-10.90）：</p>

                    <div class="formula-block">
                        $$L_q = \frac{\rho^2(k+1)}{2k(1-\rho)} = \frac{\rho^2}{1-\rho} - \frac{(k-1)\rho^2}{2k(1-\rho)}$$
                        
                        $$L = L_q + \rho = \frac{\rho}{1-\rho} - \frac{(k-1)\rho^2}{2k(1-\rho)}$$
                        
                        $$W = \frac{1}{\mu(1-\rho)} - \frac{(k-1)\rho}{2k\mu(1-\rho)}$$
                        
                        $$W_q = \frac{\rho}{\mu(1-\rho)} - \frac{(k-1)\rho}{2k\mu(1-\rho)}$$
                    </div>
                </div>
            </div>
        </section>

        <!-- 第六节：排队系统的优化 -->
        <section id="section6">
            <h2>第六节 排队系统的优化</h2>
            <p>排队系统的优化问题分为两类：系统的最优设计和最优控制，前者称为静态最优问题，目的在于使系统达到最大效益，或者说在一定指标下使系统最为经济；后者称为动态最优问题，是指对一给定的系统，如何运营可使给定的目标函数达到最优。</p>

            <p>本节着重介绍静态最优问题。在一般情形下，提高服务水平（数量、质量）可减少顾客的等待费用（损失），但却常常增加了服务机构的成本。因此，优化的目标之一就是使两者的费用之和为最小，并确定达到最优目标值的服务水平。</p>

            <h3>一、M/M/1模型中的最优服务率$\mu^*$</h3>
            <p>先考虑$M/M/1/\infty$模型，取目标函数$z$为单位时间服务成本与顾客在系统中逗留费用之和的期望值，即：</p>

            <div class="formula-block">
                $$z = c_s\mu + c_wL$$
            </div>

            <p>其中，$c_s$为当$\mu=1$时单位时间内的服务费用，$c_w$为每个顾客在系统中逗留单位时间的费用，则由式(10.11)，有：</p>

            <div class="formula-block">
                $$z = c_s\mu + c_w\frac{\lambda}{\mu-\lambda}$$
            </div>

            <p>令$\frac{dz}{d\mu} = c_s - c_w\lambda\frac{1}{(\mu-\lambda)^2} = 0$</p>

            <p>解出最优服务率为（式10.91）：</p>

            <div class="formula-block">
                $$\mu^* = \lambda + \sqrt{\frac{c_w}{\lambda c_s}}$$
            </div>

            <h3>二、M/M/s模型中的最优的服务台数$s^*$</h3>
            <p>这里仅讨论$M/M/s/\infty$系统，已知在平稳状态下单位时间内总费用（服务费用与等待费用）$z$和的平均值为（式10.94）：</p>

            <div class="formula-block">
                $$z = c_s's + c_wL$$
            </div>

            <p>其中，$s$为服务台数，$c_s'$是每个服务台单位时间内的费用，$L$是平均队长或平均排队长。由于$c_s', c_w$是给定的，故唯一可变的是服务台数$s$，所以可将$z$看成是$s$的函数，记为$z=z(s)$，并求使$z(s)$达到最小的$s^*$。</p>

            <p>因为$s$只取整数，$z(s)$不是连续函数，故不能用经典的微分法，下面采用边际分析方法。根据$z(s^*)$应为最小的特点，有（式10.95）：</p>

            <div class="formula-block">
                $$z(s^*) < z(s^*-1)$$
                $$z(s^*) \leq z(s^*+1)$$
            </div>

            <p>将式(10.94)代入式(10.95)，得：</p>

            <div class="formula-block">
                $$c_s's^* + c_wL(s^*) \leq c_s'(s^*-1) + c_wL(s^*-1)$$
                $$c_s's^* + c_wL(s^*) \leq c_s'(s^*+1) + c_wL(s^*+1)$$
            </div>

            <p>化简后得到（式10.96）：</p>

            <div class="formula-block">
                $$L(s^*) - L(s^*+1) \leq \frac{c_s'}{c_w} \leq L(s^*-1) - L(s^*)$$
            </div>

            <p>依次求当$s=1,2,3,\ldots$时$L$的值，并计算相邻两个$L$值的差。因为$\frac{c_s'}{c_w}$是已知数，根据其落在哪个与$s$有关的不等式中，即可定出最优的$s^*$。</p>

            <div class="example">
                <h4>例9</h4>
                <p><strong>问题：</strong>某检验中心为各工厂服务，要求进行检验的工厂（顾客）的到来服从Poisson流，平均到达率为$\lambda=48$（次/d）；每次来检验由于停工等原因损失6元；服务（检验）时间服从负指数分布，平均服务率为$\mu=25$（次/d）；每设置一个检验员的服务成本为4元/d。其他条件均适合$M/M/s$系统。问应设几个检验员可使总费用的平均值最少？</p>
                
                <div class="solution">
                    <strong>解：</strong>
                    <p>已知$c_s' = 4, c_w = 6, \lambda = 48, \mu = 25, \rho = \frac{\lambda}{\mu} = 1.92$，设检验员数为$s$，由式(10.22)和式(10.27)：</p>
                    
                    <div class="formula-block">
                        $$p_0 = \left[\sum_{n=0}^{s-1}\frac{\rho^n}{n!} + \frac{\rho^s}{s!(1-\rho_0)}\right]^{-1}$$
                        
                        $$L = L_q + \rho = \frac{p_0(1.92)^{s+1}}{(s-1)!(s-1.92)^2} + 1.92$$
                    </div>
                    
                    <p>将$s=2,3,4,5$依次代入得到表10-4。由于$\frac{c_s'}{c_w} = \frac{4}{6} = 0.67$落在区间$(0.582, 21.845)$之间，故$s^* = 3$，即当设3个检验员时可使总费用$z$最小，最小值为：</p>
                    
                    <p>$z(s^*) = z(3) = 27.87$（元）</p>
                </div>
            </div>
        </section>

        <!-- 习题部分 -->
        <section id="exercises">
            <h2>习题</h2>
            <p class="note"><strong>💪 练习时间！</strong>以下是本章的练习题，建议在学习完各节内容后认真完成。</p>

            <button class="collapsible">📝 习题10.1-10.5</button>
            <div class="content">
                <div class="content-inner">
                    <ol>
                        <li><strong>10.1</strong> 某店仅有一个修理工人，顾客到达过程为Poisson流，平均3人/h，修理时间服从负指数分布，平均需10min。求：
                            <ul>
                                <li>(1) 店内空闲的概率</li>
                                <li>(2) 有4个顾客的概率</li>
                                <li>(3) 至少有1个顾客的概率</li>
                                <li>(4) 店内顾客的平均数</li>
                                <li>(5) 等待服务的顾客的平均数</li>
                                <li>(6) 平均等待修理时间</li>
                                <li>(7) 一个顾客在店内逗留时间超过15min的概率</li>
                            </ul>
                        </li>
                        
                        <li><strong>10.2</strong> 设有一单人打字室，顾客的到达为Poisson流，平均到达时间间隔为20min，打字时间服从负指数分布，平均为15min。求相关指标。</li>
                        
                        <li><strong>10.3</strong> 汽车按平均90辆/h的Poisson流到达高速公路上的一个收费关卡，通过关卡的平均时间为38s。分析采用新装置是否合算。</li>
                        
                        <li><strong>10.4</strong> 某车间的工具仓库只有一个管理员，平均有4人/h来领工具，到达过程为Poisson流；领工具的时间服从负指数分布，平均为6min。由于场地限制，仓库内领工具的人最多不能超过3人，求相关指标。</li>
                        
                        <li><strong>10.5</strong> 某工厂买了许多同种类型的自动化机器，现需要确定一个工人应看管几台机器。分析在给定条件下，每个工人最多能看管几台机器。</li>
                    </ol>
                </div>
            </div>

            <button class="collapsible">📝 习题10.6-10.10</button>
            <div class="content">
                <div class="content-inner">
                    <ol start="6">
                        <li><strong>10.6</strong> 在习题10.1中，若顾客的平均到达率增加到6人/h，服务时间不变，这时增加一个修理工人。分析增加工人的原因和效果。</li>
                        
                        <li><strong>10.7</strong> 有一$M/M/1/5$系统，平均服务率$\mu=10$，就两种到达率$\lambda=6$和$\lambda=15$已得到相应的概率，分析系统性能。</li>
                        
                        <li><strong>10.8</strong> 在习题10.1中，如服务时间服从正态分布，数学期望是10min，方差为0.125，求店内顾客数的期望值。</li>
                        
                        <li><strong>10.9</strong> 某人核对申请书时，必须依次检查8张表格，每张表格的核对时间平均需要1min。申请书的到达率平均为6份/h，求相关指标。</li>
                        
                        <li><strong>10.10</strong> 存货被使用的时间服从参数为$\mu$的负指数分布，再补充之间的时间间隔服从参数为$\lambda$的负指数分布。分析最优$\rho$值。</li>
                    </ol>
                </div>
            </div>

            <button class="collapsible">📝 习题10.11-10.20</button>
            <div class="content">
                <div class="content-inner">
                    <ol start="11">
                        <li><strong>10.11</strong> 对定长服务时$M/D/1/\infty$模型推导相关指标的表达式。</li>
                        
                        <li><strong>10.12</strong> 来到某餐厅的顾客流服从Poisson分布，平均20人/h，餐厅于上午11:00开始营业。求相关概率。</li>
                        
                        <li><strong>10.13</strong> 考虑一个$M/M/1/K$系统，分析两个改进方案的收入差异。</li>
                        
                        <li><strong>10.14-10.20</strong> 更多实际应用问题...</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- 页脚 -->
        <footer style="text-align: center; padding: 30px; background: #343434; color: #ffffff; border-radius: 10px; margin-top: 40px;">
            <p style="margin-bottom: 10px;">📚 运筹学教程（第5版）- 第十章 排队论</p>
            <p style="font-size: 0.9em; opacity: 0.8;">本教程采用交互式HTML格式，便于学习和理解</p>
            <p style="margin-top: 15px; font-size: 0.85em;">
                <strong>⚠️ 使用提示：</strong><br>
                1. 需要网络连接以加载MathJax库渲染数学公式<br>
                2. 点击带颜色的按钮可展开/折叠内容<br>
                3. 使用左侧导航栏快速跳转到不同章节<br>
                4. 建议使用现代浏览器（Chrome、Firefox、Edge等）获得最佳体验
            </p>
        </footer>
    </main>

    <!-- 返回顶部按钮 -->
    <button id="backToTop" title="返回顶部">↑</button>

    <script>
        // 折叠/展开功能
        var coll = document.getElementsByClassName("collapsible");
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }

        // 返回顶部按钮
        var backToTopButton = document.getElementById("backToTop");
        
        window.onscroll = function() {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                backToTopButton.style.display = "block";
            } else {
                backToTopButton.style.display = "none";
            }
        };

        backToTopButton.onclick = function() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        };

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 加载提示
        window.addEventListener('load', function() {
            console.log('✅ 页面加载完成！');
            console.log('📊 MathJax正在渲染数学公式...');
        });
    </script>
</body>
</html>