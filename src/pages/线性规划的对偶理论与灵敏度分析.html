<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第二章 线性规划的对偶理论与灵敏度分析</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav {
            background: #2c3e50;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: bold;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .card h3 {
            color: #c0392b;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-left: 4px solid #e74c3c;
            padding-left: 10px;
        }

        .formula {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #3498db;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .example {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .example h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .highlight {
            background: #f39c12;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .key-point {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 3px solid #e74c3c;
        }

        .key-point::before {
            content: "💡 ";
            font-size: 1.5em;
        }

        .accordion {
            margin: 20px 0;
        }

        .accordion-item {
            margin-bottom: 10px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .accordion-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #ecf0f1;
            padding: 0 20px;
        }

        .accordion-content.active {
            max-height: 1000px;
            padding: 20px;
        }

        .quiz-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        .quiz-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .result {
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }

        .result.correct {
            background: #2ecc71;
            color: white;
            display: block;
        }

        .result.incorrect {
            background: #e74c3c;
            color: white;
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .property-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-weight: bold;
            color: white;
        }

        .property-1 { background: #e74c3c; }
        .property-2 { background: #3498db; }
        .property-3 { background: #2ecc71; }
        .property-4 { background: #f39c12; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 第二章：线性规划的对偶理论与灵敏度分析</h1>
            <p>互动学习系统 · 轻松掌握对偶理论</p>
        </div>

        <div class="nav">
            <button class="nav-btn active" onclick="showSection(0)">💡 对偶问题</button>
            <button class="nav-btn" onclick="showSection(1)">⚡ 基本性质</button>
            <button class="nav-btn" onclick="showSection(2)">💰 影子价格</button>
            <button class="nav-btn" onclick="showSection(3)">🔧 对偶单纯形法</button>
            <button class="nav-btn" onclick="showSection(4)">📈 灵敏度分析</button>
            <button class="nav-btn" onclick="showSection(5)">🎯 练习题</button>
        </div>

        <div class="content">
            <!-- Section 1: 对偶问题 -->
            <div class="section active">
                <div class="card">
                    <h3>🎯 什么是对偶问题？</h3>
                    <p>每一个线性规划问题都存在一个与其对偶的问题。在求出一个问题解的时候，也同时给出了另一个问题的解。</p>
                    
                    <div class="example">
                        <h4>📝 经典例子：美佳公司</h4>
                        <p><strong>原问题（生产计划）：</strong>如何充分利用现有资源完成更多任务？</p>
                        <div class="formula">
max z = 2x₁ + x₂
s.t. 5x₂ ≤ 15
     6x₁ + 2x₂ ≤ 24
     x₁ + x₂ ≤ 5
     x₁, x₂ ≥ 0
                        </div>
                        <p><strong>对偶问题（资源定价）：</strong>用最少代价收买全部资源？</p>
                        <div class="formula">
min w = 15y₁ + 24y₂ + 5y₃
s.t. 6y₂ + y₃ ≥ 2
     5y₁ + 2y₂ + y₃ ≥ 1
     y₁, y₂, y₃ ≥ 0
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>📋 对称形式的对偶关系</h3>
                    <table>
                        <tr>
                            <th>项目</th>
                            <th>原问题</th>
                            <th>对偶问题</th>
                        </tr>
                        <tr>
                            <td><strong>目标函数</strong></td>
                            <td>max z = CX</td>
                            <td>min w = Y<sup>T</sup>b</td>
                        </tr>
                        <tr>
                            <td><strong>约束条件</strong></td>
                            <td>AX ≤ b</td>
                            <td>A<sup>T</sup>Y ≥ C<sup>T</sup></td>
                        </tr>
                        <tr>
                            <td><strong>变量</strong></td>
                            <td>X ≥ 0</td>
                            <td>Y ≥ 0</td>
                        </tr>
                    </table>
                    
                    <div class="key-point">
                        <strong>关键对应关系：</strong>
                        <ul style="margin-top: 10px; line-height: 1.8;">
                            <li>原问题的 <span class="highlight">m个约束</span> ↔ 对偶问题的 <span class="highlight">m个变量</span></li>
                            <li>原问题的 <span class="highlight">n个变量</span> ↔ 对偶问题的 <span class="highlight">n个约束</span></li>
                            <li>原问题的 <span class="highlight">系数矩阵A</span> ↔ 对偶问题的 <span class="highlight">A<sup>T</sup></span></li>
                        </ul>
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            非对称形式的对偶关系 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <table>
                                <tr>
                                    <th>原问题约束</th>
                                    <th>对偶变量</th>
                                </tr>
                                <tr>
                                    <td>≤ 型约束</td>
                                    <td>yᵢ ≥ 0</td>
                                </tr>
                                <tr>
                                    <td>≥ 型约束</td>
                                    <td>yᵢ ≤ 0</td>
                                </tr>
                                <tr>
                                    <td>= 型约束</td>
                                    <td>yᵢ 无约束</td>
                                </tr>
                            </table>
                            <p style="margin-top: 15px;"><strong>反过来：</strong></p>
                            <table>
                                <tr>
                                    <th>原问题变量</th>
                                    <th>对偶约束</th>
                                </tr>
                                <tr>
                                    <td>xⱼ ≥ 0</td>
                                    <td>≥ 型约束</td>
                                </tr>
                                <tr>
                                    <td>xⱼ ≤ 0</td>
                                    <td>≤ 型约束</td>
                                </tr>
                                <tr>
                                    <td>xⱼ 无约束</td>
                                    <td>= 型约束</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: 基本性质 -->
            <div class="section">
                <div class="card">
                    <h3>⚡ 对偶问题的四大基本性质</h3>
                    
                    <div style="margin: 20px 0;">
                        <div class="property-badge property-1">1. 弱对偶性</div>
                        <div class="formula">
                            如果 x̄ 是原问题的可行解，ȳ 是对偶问题的可行解，则：<br>
                            <strong>Σcⱼx̄ⱼ ≤ Σbᵢȳᵢ</strong>
                        </div>
                        <div class="key-point">
                            原问题最优解的目标函数值是对偶问题目标函数值的<span class="highlight">下界</span>；<br>
                            对偶问题最优解的目标函数值是原问题目标函数值的<span class="highlight">上界</span>
                        </div>
                    </div>

                    <div style="margin: 20px 0;">
                        <div class="property-badge property-2">2. 最优性</div>
                        <div class="formula">
                            如果 x̄ 是原问题的可行解，ȳ 是对偶问题的可行解，且：<br>
                            <strong>Σcⱼx̄ⱼ = Σbᵢȳᵢ</strong><br>
                            则 x̄ 和 ȳ 都是各自问题的最优解
                        </div>
                    </div>

                    <div style="margin: 20px 0;">
                        <div class="property-badge property-3">3. 强对偶性（对偶定理）</div>
                        <div class="key-point">
                            若原问题及其对偶问题均具有可行解，则<strong>两者均具有最优解</strong>，且它们最优解的目标函数值<span class="highlight">相等</span>。
                        </div>
                    </div>

                    <div style="margin: 20px 0;">
                        <div class="property-badge property-4">4. 互补松弛性</div>
                        <div class="formula">
                            在线性规划问题的最优解中：<br>
                            • 如果某一约束条件的对偶变量值为<strong>非零</strong>，则该约束条件取<span class="highlight">严格等式</span><br>
                            • 如果约束条件取<strong>严格不等式</strong>，则其对应的对偶变量一定为<span class="highlight">零</span>
                        </div>
                        <div class="example">
                            <h4>数学表达：</h4>
                            <p>若 ȳᵢ > 0，则 Σaᵢⱼx̄ⱼ = bᵢ（松弛变量 xₙ₊ᵢ = 0）</p>
                            <p>若 Σaᵢⱼx̄ⱼ < bᵢ，则 ȳᵢ = 0</p>
                            <p>因此一定有：<strong>xₙ₊ᵢ · ȳᵢ = 0</strong></p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>🔍 性质应用示例</h3>
                    <div class="example">
                        <h4>例：判断最优性</h4>
                        <p>原问题可行解：x = (2, 3)，目标函数值 z = 10</p>
                        <p>对偶问题可行解：y = (1, 2, 1)，目标函数值 w = 10</p>
                        <p style="margin-top: 10px; color: #27ae60; font-weight: bold;">
                            ✓ 因为 z = w，根据最优性，两者都是最优解！
                        </p>
                    </div>
                </div>
            </div>

            <!-- Section 3: 影子价格 -->
            <div class="section">
                <div class="card">
                    <h3>💰 影子价格 (Shadow Price)</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        影子价格是指在资源最优利用条件下，<strong>单位资源对目标函数的贡献</strong>。
                        它不是资源的市场价格，而是一种<span class="highlight">边际价格</span>。
                    </p>
                </div>

                <div class="card">
                    <h3>📊 影子价格的六大特点</h3>
                    <div class="accordion">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                1️⃣ 与市场价格的区别 <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                <p><strong>市场价格：</strong>资源价值的客观体现，随供求关系变化</p>
                                <p><strong>影子价格：</strong>取决于资源的利用情况，是当前一组基变量获得最优解时，每单位资源对利润的贡献</p>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                2️⃣ 边际价格的含义 <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="formula">
                                    yᵢ* = ∂z*/∂bᵢ
                                </div>
                                <p>影子价格 yᵢ* 表示在最优解处，资源 bᵢ 每增加一个单位时，目标函数 z 的增量</p>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                3️⃣ 机会成本 <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                <p>在完全市场经济条件下：</p>
                                <ul style="margin: 10px 0; line-height: 1.8;">
                                    <li>当<strong>市场价格 < 成本 + 影子价格</strong>时，可以<span class="highlight">买进</span>资源</li>
                                    <li>当<strong>市场价格 > 成本 + 影子价格</strong>时，可以<span class="highlight">卖出</span>资源</li>
                                </ul>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                4️⃣ 资源利用与影子价格的关系 <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="key-point">
                                    • 如果某种资源<strong>未充分利用</strong>（松弛变量 > 0），该资源的影子价格为<span class="highlight">零</span><br>
                                    • 如果影子价格<strong>不为零</strong>，表明该资源在生产中<span class="highlight">已耗费完毕</span>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                5️⃣ 检验数的经济意义 <span>▼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="formula">
                                    σⱼ = cⱼ - CᵦB⁻¹Pⱼ = cⱼ - Σaᵢⱼyᵢ
                                </div>
                                <p>• <strong>cⱼ</strong>：第j种产品的利润</p>
                                <p>• <strong>Σaᵢⱼyᵢ</strong>：生产该产品所消耗各项资源的影子价格总和（隐含成本）</p>
                                <p style="margin-top: 10px; color: #e74c3c; font-weight: bold;">
                                    当产品利润 > 隐含成本时，生产该产品有利！
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>📈 实例：美佳公司的影子价格</h3>
                    <div class="example">
                        <h4>通过图解法分析：</h4>
                        <p>• 设备A（资源1）：影子价格 y₁ = 0（资源未充分利用）</p>
                        <p>• 设备B（资源2）：影子价格 y₂ = 1/4（资源2每增加1h，利润增加0.25元）</p>
                        <p>• 调试工序（资源3）：影子价格 y₃ = 1/2（资源3每增加1h，利润增加0.5元）</p>
                        <div style="margin-top: 15px; padding: 15px; background: #3498db; color: white; border-radius: 8px;">
                            <strong>💡 决策建议：</strong>如果市场上可以低价购买调试工序的时间，应该考虑购买，因为其影子价格较高！
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: 对偶单纯形法 -->
            <div class="section">
                <div class="card">
                    <h3>🔧 对偶单纯形法</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        对偶单纯形法是应用<strong>对偶理论</strong>求解线性规划问题的方法。
                        它先找出一个<span class="highlight">对偶问题的可行基</span>，保持对偶问题为基可行解，
                        直到原问题也为可行解。
                    </p>
                </div>

                <div class="card">
                    <h3>🎯 基本思路</h3>
                    <div class="key-point">
                        <strong>核心理念：</strong><br>
                        1. 找出一个对偶问题的可行基 B（即检验数 σⱼ ≤ 0）<br>
                        2. 保持对偶可行（检验数非正），寻找原问题可行解（b̄ᵢ ≥ 0）<br>
                        3. 当两者都可行时，根据强对偶性，即为最优解
                    </div>

                    <div class="example">
                        <h4>📝 计算步骤：</h4>
                        <ol style="line-height: 2;">
                            <li><strong>确定换出变量：</strong>令 b̄ᵣ = min{b̄ᵢ | b̄ᵢ < 0}，xᵣ 为换出变量</li>
                            <li><strong>确定换入变量：</strong>
                                <div class="formula">
                                    θ = min{|σⱼ/aᵣⱼ| : aᵣⱼ < 0} = |σₛ/aᵣₛ|
                                </div>
                                xₛ 为换入变量，aᵣₛ 为主元素
                            </li>
                            <li><strong>迭代计算：</strong>用换入变量替换换出变量，得到新的基</li>
                            <li><strong>检查终止条件：</strong>若所有 b̄ᵢ ≥ 0，则找到最优解</li>
                        </ol>
                    </div>
                </div>

                <div class="card">
                    <h3>⚠️ 无可行解的判断</h3>
                    <div style="background: #e74c3c; color: white; padding: 15px; border-radius: 10px;">
                        <strong>判断准则：</strong><br>
                        对 b̄ᵣ < 0，若对所有 j = 1, ..., n，有 aᵣⱼ ≥ 0，<br>
                        则原问题<span class="highlight">无可行解</span>，这时对偶问题的目标函数值无界。
                    </div>
                </div>

                <div class="card">
                    <h3>✅ 优点</h3>
                    <ul style="line-height: 2;">
                        <li>✓ 当约束条件为 "≥" 时，<strong>不必引进人工变量</strong>，简化计算</li>
                        <li>✓ 主要应用于<strong>灵敏度分析</strong>和<strong>整数规划的割平面法</strong></li>
                        <li>✓ 在初始单纯形表中，对偶问题应是<strong>基可行解</strong></li>
                    </ul>
                </div>
            </div>

            <!-- Section 5: 灵敏度分析 -->
            <div class="section">
                <div class="card">
                    <h3>📈 灵敏度分析</h3>
                    <p style="font-size: 1.1em; line-height: 1.8;">
                        灵敏度分析研究<strong>参数变化</strong>对最优解的影响，
                        确定参数在多大范围内变化时，<span class="highlight">最优解或最优基不变</span>。
                    </p>
                </div>

                <div class="card">
                    <h3>🔍 分析步骤</h3>
                    <div class="key-point">
                        1️⃣ 将参数的改变反映到<strong>最终单纯形表</strong>上<br>
                        2️⃣ 检查<strong>原问题</strong>是否仍为可行解<br>
                        3️⃣ 检查<strong>对偶问题</strong>是否仍为可行解<br>
                        4️⃣ 按不同情况得出结论或继续计算
                    </div>

                    <table style="margin-top: 20px;">
                        <tr>
                            <th>原问题</th>
                            <th>对偶问题</th>
                            <th>结论或步骤</th>
                        </tr>
                        <tr>
                            <td>✓ 可行解</td>
                            <td>✓ 可行解</td>
                            <td>问题的最优解或最优基不变</td>
                        </tr>
                        <tr>
                            <td>✓ 可行解</td>
                            <td>✗ 非可行解</td>
                            <td>用单纯形法继续迭代求最优解</td>
                        </tr>
                        <tr>
                            <td>✗ 非可行解</td>
                            <td>✓ 可行解</td>
                            <td>用对偶单纯形法继续迭代求最优解</td>
                        </tr>
                        <tr>
                            <td>✗ 非可行解</td>
                            <td>✗ 非可行解</td>
                            <td>引进人工变量，编制新的单纯形表重新计算</td>
                        </tr>
                    </table>
                </div>

                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            📊 1. 目标函数系数 cⱼ 的变化分析 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <p>cⱼ 的变化<strong>仅影响检验数</strong> (cⱼ - zⱼ)，可能出现两种情况：</p>
                            <ul style="margin: 10px 0; line-height: 1.8;">
                                <li><strong>情况1：</strong>所有检验数仍 ≤ 0 → 最优解不变</li>
                                <li><strong>情况2：</strong>某些检验数 > 0 → 用单纯形法继续迭代</li>
                            </ul>
                            <div class="example">
                                <h4>求允许变化范围：</h4>
                                <p>设 c₂ 变为 (1 + λ)，要使最优解不变，需满足所有检验数 ≤ 0</p>
                                <p>解不等式组即可得到 λ 的范围</p>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            📊 2. 约束右端项 bᵢ 的变化分析 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <p>bᵢ 的变化在最终单纯形表中<strong>引起 b 列数字的变化</strong>：</p>
                            <div class="formula">
                                Δb' = B⁻¹Δb
                            </div>
                            <p>可能出现两种情况：</p>
                            <ul style="margin: 10px 0; line-height: 1.8;">
                                <li><strong>情况1：</strong>b' ≥ 0 → 最优基不变</li>
                                <li><strong>情况2：</strong>某些 b'ᵢ < 0 → 用对偶单纯形法继续迭代</li>
                            </ul>
                            <div class="key-point">
                                💡 影子价格在这里发挥作用：yᵢ* = ∂z*/∂bᵢ
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            📊 3. 增加一个变量 xⱼ 的分析 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <p><strong>实际意义：</strong>增加一种新产品</p>
                            <p><strong>分析步骤：</strong></p>
                            <ol style="line-height: 1.8;">
                                <li>计算检验数：σⱼ' = cⱼ - Σaᵢⱼyᵢ*</li>
                                <li>计算系数列：P'ⱼ = B⁻¹Pⱼ</li>
                                <li>判断：
                                    <ul>
                                        <li>若 σⱼ' ≤ 0，原最优解不变，只需将 σⱼ' 和 P'ⱼ 写入表中</li>
                                        <li>若 σⱼ' > 0，按单纯形法继续迭代</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            📊 4. 约束系数 aᵢⱼ 的变化分析 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <p>aᵢⱼ 的变化使约束系数矩阵 A 发生变化。</p>
                            <p><strong>两种情况：</strong></p>
                            <ul style="line-height: 1.8;">
                                <li><strong>xⱼ 为非基变量：</strong>参照"增加一个变量"的分析</li>
                                <li><strong>xⱼ 为基变量：</strong>B 和 B⁻¹ 都发生变化，可能原问题和对偶问题均为非可行解，需引进人工变量重新计算</li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            📊 5. 增加一个约束条件的分析 <span>▼</span>
                        </div>
                        <div class="accordion-content">
                            <p><strong>实际意义：</strong>增添一道工序</p>
                            <p><strong>分析方法：</strong></p>
                            <ol style="line-height: 1.8;">
                                <li>将原问题最优解代入新增约束</li>
                                <li>如果满足 → 新增约束未起限制作用，原最优解不变</li>
                                <li>如果不满足 → 将新增约束（加松弛变量后）直接反映到最终单纯形表中，再进一步分析</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 6: 练习题 -->
            <div class="section">
                <div class="card">
                    <h3>🎯 知识检测</h3>
                    
                    <div class="example">
                        <h4>题目1：判断题</h4>
                        <p>如果线性规划的原问题存在可行解，则其对偶问题也一定存在可行解。</p>
                        <button class="quiz-btn" onclick="checkAnswer(1, false)">✓ 正确</button>
                        <button class="quiz-btn" onclick="checkAnswer(1, true)">✗ 错误</button>
                        <div id="result1" class="result"></div>
                    </div>

                    <div class="example">
                        <h4>题目2：概念题</h4>
                        <p>影子价格的含义是什么？</p>
                        <button class="quiz-btn" onclick="checkAnswer(2, 'A')">A. 资源的市场价格</button>
                        <button class="quiz-btn" onclick="checkAnswer(2, 'B')">B. 资源的采购成本</button>
                        <button class="quiz-btn" onclick="checkAnswer(2, 'C')">C. 单位资源对目标函数的边际贡献</button>
                        <button class="quiz-btn" onclick="checkAnswer(2, 'D')">D. 资源的账面价值</button>
                        <div id="result2" class="result"></div>
                    </div>

                    <div class="example">
                        <h4>题目3：性质题</h4>
                        <p>若原问题和对偶问题均有可行解，则以下哪个结论正确？</p>
                        <button class="quiz-btn" onclick="checkAnswer(3, 'A')">A. 两者都可能无最优解</button>
                        <button class="quiz-btn" onclick="checkAnswer(3, 'B')">B. 两者都有最优解且目标函数值相等</button>
                        <button class="quiz-btn" onclick="checkAnswer(3, 'C')">C. 只有原问题有最优解</button>
                        <button class="quiz-btn" onclick="checkAnswer(3, 'D')">D. 目标函数值不相等</button>
                        <div id="result3" class="result"></div>
                    </div>

                    <div class="example">
                        <h4>题目4：应用题</h4>
                        <p>在最优解中，某约束条件的松弛变量大于0，则该约束对应的对偶变量值是多少？</p>
                        <button class="quiz-btn" onclick="checkAnswer(4, 'A')">A. 大于0</button>
                        <button class="quiz-btn" onclick="checkAnswer(4, 'B')">B. 等于0</button>
                        <button class="quiz-btn" onclick="checkAnswer(4, 'C')">C. 小于0</button>
                        <button class="quiz-btn" onclick="checkAnswer(4, 'D')">D. 无法确定</button>
                        <div id="result4" class="result"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>📝 重点回顾</h3>
                    <div class="key-point">
                        <strong>核心要点：</strong>
                        <ul style="margin-top: 10px; line-height: 2;">
                            <li>✓ 每个线性规划问题都有唯一的对偶问题</li>
                            <li>✓ 四大基本性质：弱对偶性、最优性、强对偶性、互补松弛性</li>
                            <li>✓ 影子价格是边际价格，反映资源的边际贡献</li>
                            <li>✓ 对偶单纯形法保持对偶可行，寻找原问题可行</li>
                            <li>✓ 灵敏度分析研究参数变化对最优解的影响</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showSection(index) {
            const sections = document.querySelectorAll('.section');
            const buttons = document.querySelectorAll('.nav-btn');
            
            sections.forEach((section, i) => {
                section.classList.toggle('active', i === index);
            });
            
            buttons.forEach((button, i) => {
                button.classList.toggle('active', i === index);
            });
        }

        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const allContents = document.querySelectorAll('.accordion-content');
            const allHeaders = document.querySelectorAll('.accordion-header');
            
            allContents.forEach(c => {
                if (c !== content) {
                    c.classList.remove('active');
                }
            });
            
            content.classList.toggle('active');
        }

        const answers = {
            1: true,  // 错误，反例：原问题有可行解但对偶问题可能无可行解
            2: 'C',   // 单位资源对目标函数的边际贡献
            3: 'B',   // 两者都有最优解且目标函数值相等（强对偶性）
            4: 'B'    // 等于0（互补松弛性）
        };

        function checkAnswer(questionNum, userAnswer) {
            const resultDiv = document.getElementById('result' + questionNum);
            const correctAnswer = answers[questionNum];
            
            if (userAnswer === correctAnswer) {
                resultDiv.className = 'result correct';
                resultDiv.innerHTML = '✓ 回答正确！' + getExplanation(questionNum);
            } else {
                resultDiv.className = 'result incorrect';
                resultDiv.innerHTML = '✗ 回答错误。' + getExplanation(questionNum);
            }
        }

        function getExplanation(questionNum) {
            const explanations = {
                1: '<br><strong>解析：</strong>原问题有可行解时，对偶问题可能有可行解，也可能无可行解（此时原问题目标函数值无界）。',
                2: '<br><strong>解析：</strong>影子价格是一种边际价格，表示在最优解处，单位资源对目标函数的边际贡献，不同于市场价格。',
                3: '<br><strong>解析：</strong>这是强对偶性（对偶定理）的内容：若原问题及其对偶问题均具有可行解，则两者均具有最优解，且它们最优解的目标函数值相等。',
                4: '<br><strong>解析：</strong>根据互补松弛性，在最优解中，如果约束条件取严格不等式（松弛变量>0），则其对应的对偶变量一定为零。'
            };
            return explanations[questionNum] || '';
        }
    </script>
</body>
</html>