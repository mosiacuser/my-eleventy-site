<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第五章 定积分与反常积分 - 交互式教程</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- MathJax for LaTeX rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.8;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        nav {
            background: #2c3e50;
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        nav a:hover {
            background: #3498db;
            transform: translateY(-2px);
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 50px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 2em;
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .section-title:hover {
            color: #3498db;
        }
        
        .toggle-icon {
            font-size: 0.8em;
            transition: transform 0.3s;
        }
        
        .section-title.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }
        
        .section-content {
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .section-content.collapsed {
            max-height: 0 !important;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 500;
        }
        
        td {
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            text-align: center;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .formula-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 5px solid #2196F3;
        }
        
        .mjx-math {
            color: #1565C0 !important;
        }
        
        .example-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-left: 5px solid #4CAF50;
        }
        
        .example-title {
            font-size: 1.3em;
            color: #2e7d32;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .solution-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .solution-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }
        
        .solution {
            display: none;
            background: #f1f8e9;
            padding: 20px;
            margin-top: 15px;
            border-radius: 8px;
            border: 2px dashed #8BC34A;
        }
        
        .solution.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .theorem-box {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 5px solid #FF9800;
        }
        
        .theorem-title {
            font-size: 1.2em;
            color: #E65100;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .note-box {
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #E91E63;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-top: 10px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .highlight {
            background: linear-gradient(120deg, #fef852 0%, #fcee09 100%);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            header h1 { font-size: 1.8em; }
            .content { padding: 20px; }
            nav ul { flex-direction: column; }
            .section-title { font-size: 1.5em; }
        }
        
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #3498db;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
            transition: all 0.3s;
            opacity: 0;
            visibility: hidden;
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background: #2980b9;
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>第五章 定积分与反常积分</h1>
            <p>高等数学 · 基础篇 · 交互式教程</p>
        </header>
        
        <nav>
            <ul>
                <li><a href="#exam-outline">考试大纲</a></li>
                <li><a href="#definite-integral">定积分</a></li>
                <li><a href="#improper-integral">反常积分</a></li>
                <li><a href="#examples">典型例题</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <!-- 考试大纲 -->
            <div id="exam-outline" class="section">
                <h2 class="section-title">
                    考试大纲与要求
                    <span class="toggle-icon">▼</span>
                </h2>
                <div class="section-content">
                    <table>
                        <thead>
                            <tr>
                                <th>大纲考试内容</th>
                                <th>数一</th>
                                <th>数二</th>
                                <th>数三</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>定积分的概念</td>
                                <td>理解</td>
                                <td>理解</td>
                                <td>了解</td>
                            </tr>
                            <tr>
                                <td>定积分的性质及定积分中值定理</td>
                                <td>掌握</td>
                                <td>掌握</td>
                                <td>了解</td>
                            </tr>
                            <tr>
                                <td>积分上限的函数</td>
                                <td>理解</td>
                                <td>理解</td>
                                <td>理解</td>
                            </tr>
                            <tr>
                                <td>牛顿-莱布尼茨公式<br>定积分的换元积分法和分部积分法</td>
                                <td>掌握</td>
                                <td>掌握</td>
                                <td>掌握</td>
                            </tr>
                            <tr>
                                <td>积分上限函数的导数</td>
                                <td>会求</td>
                                <td>会求</td>
                                <td>会求</td>
                            </tr>
                            <tr>
                                <td>反常积分的概念</td>
                                <td>理解</td>
                                <td>理解</td>
                                <td>理解</td>
                            </tr>
                            <tr>
                                <td>反常积分收敛的比较判别法</td>
                                <td>了解</td>
                                <td>了解</td>
                                <td>了解</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- 第一节：定积分 -->
            <div id="definite-integral" class="section">
                <h2 class="section-title">
                    第一节 定积分
                    <span class="toggle-icon">▼</span>
                </h2>
                <div class="section-content">
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">一、定积分的概念</h3>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定义</div>
                        <p>设函数 \( f(x) \) 在区间 \([a, b]\) 上有定义且有界。</p>
                        <ol>
                            <li><strong>分割：</strong>在 \([a, b]\) 中任意插入 \(n-1\) 个分点 \(a = x_0 < x_1 < x_2 < \cdots < x_{n-1} < x_n = b\)，将 \([a, b]\) 分成 \(n\) 个小区间 \([x_{i-1}, x_i]\)，\(i = 1, 2, \cdots, n\)，记 \(\Delta x_i = x_i - x_{i-1}\) 表示第 \(i\) 个小区间的长度。</li>
                            <li><strong>求和：</strong>在每个 \([x_{i-1}, x_i]\) 上任取一点 \(\xi_i\)，作和 \(\sum_{i=1}^{n} f(\xi_i)\Delta x_i\)，记 \(\lambda = \max\{\Delta x_1, \Delta x_2, \cdots, \Delta x_n\}\)。</li>
                            <li><strong>取极限：</strong>如果 \(\lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i)\Delta x_i\) 存在，且此极限不依赖于区间的分法，也不依赖于 \(\xi_i\) 的取法，则称 \(f(x)\) 在 \([a, b]\) 上可积，此极限为 \(f(x)\) 在 \([a, b]\) 上的<span class="highlight">定积分</span>，记为 \(\int_a^b f(x)dx\)，即：
                            $$\int_a^b f(x)dx = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i)\Delta x_i$$
                            </li>
                        </ol>
                    </div>
                    
                    <div class="note-box">
                        <strong>注意：</strong>
                        <ul>
                            <li>定积分表示一个<strong>数值</strong>，仅与被积函数 \(f(x)\) 和积分区间 \([a, b]\) 有关，与积分变量 \(x\) 无关。因此有：$$\int_a^b f(x)dx = \int_a^b f(t)dt$$</li>
                            <li>如果在求极限时 \(\Delta x_i = \frac{b-a}{n}\)，取 \(\xi_i = a + \frac{i(b-a)}{n}\)，则：$$\int_a^b f(x)dx = \lim_{n \to \infty} \frac{b-a}{n} \sum_{i=1}^{n} f\left(a + \frac{i(b-a)}{n}\right)$$
                            此式在求极限时是常用形式。</li>
                        </ul>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">二、定积分存在的充要条件</h3>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定理1</div>
                        <p>若 \(f(x)\) 在 \([a, b]\) 上<strong>连续</strong>，则 \(\int_a^b f(x)dx\) 必定存在。</p>
                    </div>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定理2</div>
                        <p>若 \(f(x)\) 在 \([a, b]\) 上<strong>有界</strong>，且只有<strong>有限个间断点</strong>，则 \(\int_a^b f(x)dx\) 必定存在。</p>
                    </div>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定理3</div>
                        <p>若 \(f(x)\) 在 \([a, b]\) 上有界，且只有有限个<strong>第一类间断点</strong>，则 \(\int_a^b f(x)dx\) 必定存在。</p>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">三、定积分的几何意义</h3>
                    
                    <ul>
                        <li>若在 \([a, b]\) 上 \(f(x) \geq 0\)，则 \(\int_a^b f(x)dx\) 的值等于以 \(y = f(x)\)，\(x = a\)，\(x = b\) 及 \(x\) 轴所围成的曲边梯形的面积。</li>
                        <li>若在 \([a, b]\) 上 \(f(x) < 0\)，则 \(\int_a^b f(x)dx\) 的值等于以 \(y = f(x)\)，\(x = a\)，\(x = b\) 及 \(x\) 轴所围成的曲边梯形面积的<strong>负值</strong>。</li>
                        <li>若在 \([a, b]\) 上 \(f(x)\) 有正有负，则 \(\int_a^b f(x)dx\) 的值等于 \(x\) 轴上方的面积减去 \(x\) 轴下方的面积所得之差。</li>
                    </ul>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">四、定积分的性质</h3>
                    
                    <div class="formula-box">
                        <strong>1. 不等式性质</strong>
                        <p>(1) 若在区间 \([a, b]\) 上 \(f(x) \leq g(x)\)，则：$$\int_a^b f(x)dx \leq \int_a^b g(x)dx$$</p>
                        <p>(2) 若 \(M\) 及 \(m\) 分别是 \(f(x)\) 在 \([a, b]\) 上的最大值和最小值，则：$$m(b - a) \leq \int_a^b f(x)dx \leq M(b - a)$$</p>
                        <p>(3) $$\left|\int_a^b f(x)dx\right| \leq \int_a^b |f(x)|dx$$</p>
                    </div>
                    
                    <div class="formula-box">
                        <strong>2. 中值定理</strong>
                        <p>(1) 若 \(f(x)\) 在 \([a, b]\) 上连续，则：$$\int_a^b f(x)dx = f(\xi)(b - a), \quad (a < \xi < b)$$
                        常称 \(\frac{1}{b-a}\int_a^b f(x)dx\) 为函数 \(y = f(x)\) 在 \([a, b]\) 上的<strong>平均值</strong>。</p>
                        <p>(2) 若 \(f(x)\)，\(g(x)\) 在 \([a, b]\) 上连续，\(g(x)\) 不变号，则：$$\int_a^b f(x)g(x)dx = f(\xi)\int_a^b g(x)dx, \quad (a \leq \xi \leq b)$$</p>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">五、积分上限的函数</h3>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">变上限的积分</div>
                        <p>变上限的积分 \(\int_a^x f(t)dt\) 是其上限 \(x\) 的函数，常称之为<span class="highlight">积分上限函数</span>。</p>
                    </div>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">原函数的概念</div>
                        <p>如果 \(f(x)\) 在 \([a, b]\) 上连续，则 \(\Phi(x) = \int_a^x f(t)dt\) 为 \(f(x)\) 在 \([a, b]\) 上的一个原函数。即在 \([a, b]\) 上可导，且：$$\Phi'(x) = \left[\int_a^x f(t)dt\right]' = f(x)$$</p>
                    </div>
                    
                    <div class="note-box">
                        <strong>重要结论：</strong>
                        <ul>
                            <li><strong>连续函数必有原函数。</strong></li>
                            <li>如果 \(f(x)\) 在 \([a, b]\) 上的连续，\(\varphi(x)\)，\(\psi(x)\) 为可导函数，则：
                            $$\left[\int_{\varphi(x)}^{\psi(x)} f(t)dt\right]' = f[\psi(x)]\psi'(x) - f[\varphi(x)]\varphi'(x)$$</li>
                            <li>如果 \(f(x)\) 为奇函数，则 \(\int_0^x f(t)dt\) 为偶函数；</li>
                            <li>如果 \(f(x)\) 为偶函数，则 \(\int_0^x f(t)dt\) 为奇函数。</li>
                        </ul>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">六、定积分的计算</h3>
                    
                    <div class="formula-box">
                        <strong>1. 牛顿-莱布尼茨公式</strong>
                        <p>设 \(f(x)\) 在区间 \([a, b]\) 上连续，\(F(x)\) 为 \(f(x)\) 在 \([a, b]\) 上的一个原函数，则有：
                        $$\int_a^b f(x)dx = F(x)\Big|_a^b = F(b) - F(a)$$</p>
                    </div>
                    
                    <div class="formula-box">
                        <strong>2. 换元积分法</strong>
                        <p>设 \(f(x)\) 在区间 \(I\) 上连续，函数 \(x = \varphi(t)\) 满足以下条件：</p>
                        <ol>
                            <li>\(\varphi(a) = a\)，\(\varphi(b) = b\)；</li>
                            <li>\(\varphi(t)\) 在 \([a, b]\)（或 \([\beta, a]\)）上有连续导数，且 \(R_{\varphi} \subseteq I\)，则：
                            $$\int_a^b f(x)dx = \int_a^b f[\varphi(t)]\varphi'(t)dt$$</li>
                        </ol>
                    </div>
                    
                    <div class="formula-box">
                        <strong>3. 分部积分法</strong>
                        $$\int_a^b udv = uv\Big|_a^b - \int_a^b vdu$$
                    </div>
                    
                    <div class="formula-box">
                        <strong>4. 利用奇偶性和周期性</strong>
                        <p>(1) 设 \(f(x)\) 为 \([-a, a]\) 上的连续函数（\(a > 0\)），则：
                        $$\int_{-a}^a f(x)dx = \begin{cases} 0, & f(x)\text{为奇函数时}\\[0.5em] 2\int_0^a f(x)dx, & f(x)\text{为偶函数时} \end{cases}$$</p>
                        <p>(2) 设 \(f(x)\) 是以 \(T\) 为周期的连续函数，则对任意给定的 \(a\)，总有：
                        $$\int_a^{a+T} f(x)dx = \int_0^T f(x)dx$$</p>
                    </div>
                    
                    <div class="formula-box">
                        <strong>5. 华里士公式</strong>
                        $$\int_0^{\frac{\pi}{2}} \sin^n x dx = \int_0^{\frac{\pi}{2}} \cos^n x dx = \begin{cases} \frac{n-1}{n} \cdot \frac{n-3}{n-2} \cdots \frac{1}{2} \cdot \frac{\pi}{2}, & n\text{为正偶数}\\[0.5em] \frac{n-1}{n} \cdot \frac{n-3}{n-2} \cdots \frac{2}{3}, & n\text{为大于1的奇数} \end{cases}$$
                    </div>
                </div>
            </div>
            
            <!-- 第二节：反常积分 -->
            <div id="improper-integral" class="section">
                <h2 class="section-title">
                    第二节 反常积分
                    <span class="toggle-icon">▼</span>
                </h2>
                <div class="section-content">
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">一、无穷区间上的反常积分</h3>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定义1</div>
                        <p>设 \(f(x)\) 为 \([a, +\infty)\) 上的连续函数，如果极限 \(\lim_{t \to +\infty} \int_a^t f(x)dx\) 存在，则称此极限为函数 \(f(x)\) 在无穷区间 \([a, +\infty)\) 上的<span class="highlight">反常积分</span>，记作 \(\int_a^{+\infty} f(x)dx\)，即：
                        $$\int_a^{+\infty} f(x)dx = \lim_{t \to +\infty} \int_a^t f(x)dx$$
                        并称 \(\int_a^{+\infty} f(x)dx\) 收敛。如果上述极限不存在，则称 \(\int_a^{+\infty} f(x)dx\) 发散。</p>
                    </div>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定义2、3</div>
                        <p>类似地，可以定义 \(f(x)\) 在 \((-\infty, b]\) 和 \((-\infty, +\infty)\) 上的反常积分。</p>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">二、无界函数的反常积分（瑕积分）</h3>
                    
                    <div class="theorem-box">
                        <div class="theorem-title">定义</div>
                        <p>如果函数 \(f(x)\) 在点 \(a\) 的任一邻域内都无界，那么点 \(a\) 称为函数 \(f(x)\) 的<span class="highlight">瑕点</span>（也称为无界点）。无界函数的反常积分也称为<strong>瑕积分</strong>。</p>
                    </div>
                    
                    <h3 style="color: #2196F3; margin: 25px 0 15px 0;">三、反常积分的判别法</h3>
                    
                    <div class="formula-box">
                        <strong>定理1（比较判别法）</strong>
                        <p>设 \(f(x)\)，\(g(x)\) 在 \([a, +\infty)\) 上连续，且 \(0 \leq f(x) \leq g(x)\)，则：</p>
                        <ul>
                            <li>(1) 当 \(\int_a^{+\infty} g(x)dx\) 收敛时，\(\int_a^{+\infty} f(x)dx\) 收敛；</li>
                            <li>(2) 当 \(\int_a^{+\infty} f(x)dx\) 发散时，\(\int_a^{+\infty} g(x)dx\) 发散。</li>
                        </ul>
                    </div>
                    
                    <div class="formula-box">
                        <strong>定理2（比较判别法的极限形式）</strong>
                        <p>设 \(f(x)\)，\(g(x)\) 在 \([a, +\infty)\) 上非负连续，且 \(\lim_{x \to +\infty} \frac{f(x)}{g(x)} = \lambda\)（有限或无穷），则：</p>
                        <ul>
                            <li>(1) 当 \(\lambda \neq 0\) 时，\(\int_a^{+\infty} f(x)dx\) 与 \(\int_a^{+\infty} g(x)dx\) 同敛散；</li>
                            <li>(2) 当 \(\lambda = 0\) 时，若 \(\int_a^{+\infty} g(x)dx\) 收敛，则 \(\int_a^{+\infty} f(x)dx\) 也收敛；</li>
                            <li>(3) 当 \(\lambda = +\infty\) 时，若 \(\int_a^{+\infty} g(x)dx\) 发散，则 \(\int_a^{+\infty} f(x)dx\) 也发散。</li>
                        </ul>
                    </div>
                    
                    <div class="note-box">
                        <strong>常用结论：</strong>
                        $$\int_a^{+\infty} \frac{1}{x^p}dx \begin{cases} p > 1, & \text{收敛}\\[0.5em] p \leq 1, & \text{发散} \end{cases} \quad (a > 0)$$
                        $$\int_a^b \frac{1}{(x-a)^p}dx \begin{cases} p < 1, & \text{收敛}\\[0.5em] p \geq 1, & \text{发散} \end{cases}$$
                        $$\int_a^b \frac{1}{(b-x)^p}dx \begin{cases} p < 1, & \text{收敛}\\[0.5em] p \geq 1, & \text{发散} \end{cases}$$
                    </div>
                </div>
            </div>
            
            <!-- 典型例题 -->
            <div id="examples" class="section">
                <h2 class="section-title">
                    常考题型与典型例题
                    <span class="toggle-icon">▼</span>
                </h2>
                <div class="section-content">
                    <div class="example-card">
                        <div class="example-title">例1：利用定积分定义求极限</div>
                        <p><strong>题目：</strong>$$\lim_{n \to \infty} \left(\frac{1}{n^2+1^2} + \frac{2}{n^2+2^2} + \cdots + \frac{n}{n^2+n^2}\right) = ?$$</p>
                        <button class="solution-btn" onclick="toggleSolution(this)">显示解答</button>
                        <div class="solution">
                            <p><strong>解：</strong></p>
                            <p>原式 = $$\lim_{n \to \infty} \frac{1}{n}\left[\frac{\frac{1}{n}}{1+\left(\frac{1}{n}\right)^2} + \frac{\frac{2}{n}}{1+\left(\frac{2}{n}\right)^2} + \cdots + \frac{\frac{n}{n}}{1+\left(\frac{n}{n}\right)^2}\right]$$（提可爱因子 \(\frac{1}{n}\)）</p>
                            <p>= $$\int_0^1 \frac{x}{1+x^2}dx$$</p>
                            <p>= $$\frac{1}{2}\ln(1+x^2)\Big|_0^1 = \frac{1}{2}\ln 2$$</p>
                        </div>
                    </div>
                    
                    <div class="example-card">
                        <div class="example-title">例2：利用几何意义计算定积分</div>
                        <p><strong>题目：</strong>$$\int_{-n}^n (\sin^3 x + \sqrt{n^2-x^2})dx = ?$$</p>
                        <button class="solution-btn" onclick="toggleSolution(this)">显示解答</button>
                        <div class="solution">
                            <p><strong>解：</strong></p>
                            <p>原式 = $$2\int_0^n \sqrt{n^2-x^2}dx$$（\(\sin^3 x\) 是奇函数）</p>
                            <p>= $$2 \cdot \frac{\pi n^2}{4} = \frac{\pi n^2}{2}$$（利用几何意义：半圆面积）</p>
                        </div>
                    </div>
                    
                    <div class="example-card">
                        <div class="example-title">例3：定积分的计算</div>
                        <p><strong>题目：</strong>$$\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} (x^3 + \sin^2 x)\cos^2 x dx = ?$$</p>
                        <button class="solution-btn" onclick="toggleSolution(this)">显示解答</button>
                        <div class="solution">
                            <p><strong>解：</strong></p>
                            <p>原式 = $$2\int_0^{\frac{\pi}{2}} \sin^2 x \cos^2 x dx$$</p>
                            <p>= $$2 \cdot \int_0^{\frac{\pi}{2}} (\sin^2 x - \sin^4 x)dx$$</p>
                            <p>= $$2\left(\frac{1}{2} \cdot \frac{\pi}{2} - \frac{3}{4} \cdot \frac{1}{2} \cdot \frac{\pi}{2}\right)$$</p>
                            <p>= $$\frac{\pi}{8}$$</p>
                        </div>
                    </div>
                    
                    <div class="example-card">
                        <div class="example-title">例4：反常积分的敛散性</div>
                        <p><strong>题目：</strong>判断反常积分 $$\int_0^1 \frac{dx}{\sqrt{x-x^2}}$$ 的敛散性。</p>
                        <button class="solution-btn" onclick="toggleSolution(this)">显示解答</button>
                        <div class="solution">
                            <p><strong>解：</strong></p>
                            <p>该反常积分的被积函数有两个无界点：\(x = 0\) 和 \(x = 1\)，</p>
                            <p>$$\int_0^1 \frac{dx}{\sqrt{x-x^2}} = \int_0^{\frac{1}{2}} \frac{dx}{\sqrt{x-x^2}} + \int_{\frac{1}{2}}^1 \frac{dx}{\sqrt{x-x^2}}$$</p>
                            <p>对于第一个积分：$$\lim_{x \to 0^+} \frac{\frac{1}{\sqrt{x-x^2}}}{\frac{1}{x^{\frac{1}{2}}}} = \lim_{x \to 0^+} \frac{1}{\sqrt{1-x}} = 1$$</p>
                            <p>因为 $$\int_0^{\frac{1}{2}} \frac{1}{x^{\frac{1}{2}}}dx$$ 收敛，则 $$\int_0^{\frac{1}{2}} \frac{dx}{\sqrt{x-x^2}}$$ 收敛。</p>
                            <p>同理可证第二个积分也收敛。</p>
                            <p>故 $$\int_0^1 \frac{dx}{\sqrt{x-x^2}}$$ <strong>收敛</strong>。</p>
                        </div>
                    </div>
                    
                    <div class="example-card">
                        <div class="example-title">例5：变上限积分求导</div>
                        <p><strong>题目：</strong>设连续函数 \(f(x)\) 连续，\(\varphi(x) = \int_0^{x^2} xf(t)dt\)。若 \(\varphi(1) = 1\)，\(\varphi'(1) = 5\)，则 \(f(1) = ?\)</p>
                        <button class="solution-btn" onclick="toggleSolution(this)">显示解答</button>
                        <div class="solution">
                            <p><strong>解：</strong></p>
                            <p>对 \(\varphi(x)\) 求导：</p>
                            <p>$$\varphi'(x) = \left[\int_0^{x^2} xf(t)dt\right]' = x \cdot f(x^2) \cdot 2x = 2x^2f(x^2)$$</p>
                            <p>由 \(\varphi'(1) = 5\)，得：</p>
                            <p>$$2 \cdot 1^2 \cdot f(1^2) = 5$$</p>
                            <p>$$2f(1) = 5$$</p>
                            <p>$$f(1) = \frac{5}{2}$$</p>
                            <p><strong>答案：</strong>\(\boxed{2}\)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="back-to-top" onclick="scrollToTop()">↑</div>
    
    <script>
        // 折叠/展开章节
        document.querySelectorAll('.section-title').forEach(title => {
            title.addEventListener('click', function() {
                this.classList.toggle('collapsed');
                const content = this.nextElementSibling;
                content.classList.toggle('collapsed');
                if (!content.classList.contains('collapsed')) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                }
            });
            // 初始展开状态
            const content = title.nextElementSibling;
            content.style.maxHeight = content.scrollHeight + 'px';
        });
        
        // 显示/隐藏解答
        function toggleSolution(button) {
            const solution = button.nextElementSibling;
            solution.classList.toggle('show');
            button.textContent = solution.classList.contains('show') ? '隐藏解答' : '显示解答';
        }
        
        // 平滑滚动
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });
        
        // 返回顶部按钮
        const backToTop = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });
        
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // MathJax配置
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            "HTML-CSS": {
                styles: {
                    ".MathJax": {
                        "color": "#1565C0"
                    }
                }
            }
        });
    </script>
</body>
</html>